<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>src/http/ngx_http_variables.c - Nginx 1.11.2</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

  <h1>src/http/ngx_http_variables.c - Nginx 1.11.2</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L157">ngx_http_core_variables</a></li>
<li><a href="#L363">ngx_http_variable_null_value</a></li>
<li><a href="#L365">ngx_http_variable_true_value</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L370">ngx_http_add_variable</a></li>
<li><a href="#L538">ngx_http_get_flushed_variable</a></li>
<li><a href="#L501">ngx_http_get_indexed_variable</a></li>
<li><a href="#L558">ngx_http_get_variable</a></li>
<li><a href="#L441">ngx_http_get_variable_index</a></li>
<li><a href="#L2265">ngx_http_map_find</a></li>
<li><a href="#L2336">ngx_http_regex_compile</a></li>
<li><a href="#L2409">ngx_http_regex_exec</a></li>
<li><a href="#L1002">ngx_http_variable_argument</a></li>
<li><a href="#L1147">ngx_http_variable_binary_remote_addr</a></li>
<li><a href="#L1633">ngx_http_variable_body_bytes_sent</a></li>
<li><a href="#L1612">ngx_http_variable_bytes_sent</a></li>
<li><a href="#L2103">ngx_http_variable_connection</a></li>
<li><a href="#L2124">ngx_http_variable_connection_requests</a></li>
<li><a href="#L1085">ngx_http_variable_content_length</a></li>
<li><a href="#L974">ngx_http_variable_cookie</a></li>
<li><a href="#L771">ngx_http_variable_cookies</a></li>
<li><a href="#L1411">ngx_http_variable_document_root</a></li>
<li><a href="#L748">ngx_http_variable_header</a></li>
<li><a href="#L779">ngx_http_variable_headers</a></li>
<li><a href="#L787">ngx_http_variable_headers_internal</a></li>
<li><a href="#L1122">ngx_http_variable_host</a></li>
<li><a href="#L2159">ngx_http_variable_hostname</a></li>
<li><a href="#L1356">ngx_http_variable_https</a></li>
<li><a href="#L1390">ngx_http_variable_is_args</a></li>
<li><a href="#L2194">ngx_http_variable_msec</a></li>
<li><a href="#L2145">ngx_http_variable_nginx_version</a></li>
<li><a href="#L2327">ngx_http_variable_not_found</a></li>
<li><a href="#L2173">ngx_http_variable_pid</a></li>
<li><a href="#L1661">ngx_http_variable_pipe</a></li>
<li><a href="#L1227">ngx_http_variable_proxy_protocol_addr</a></li>
<li><a href="#L1241">ngx_http_variable_proxy_protocol_port</a></li>
<li><a href="#L1452">ngx_http_variable_realpath_root</a></li>
<li><a href="#L1187">ngx_http_variable_remote_addr</a></li>
<li><a href="#L1201">ngx_http_variable_remote_port</a></li>
<li><a href="#L1585">ngx_http_variable_remote_user</a></li>
<li><a href="#L660">ngx_http_variable_request</a></li>
<li><a href="#L1931">ngx_http_variable_request_body</a></li>
<li><a href="#L1992">ngx_http_variable_request_body_file</a></li>
<li><a href="#L1907">ngx_http_variable_request_completion</a></li>
<li><a href="#L1525">ngx_http_variable_request_filename</a></li>
<li><a href="#L700">ngx_http_variable_request_get_size</a></li>
<li><a href="#L2062">ngx_http_variable_request_id</a></li>
<li><a href="#L2012">ngx_http_variable_request_length</a></li>
<li><a href="#L938">ngx_http_variable_request_line</a></li>
<li><a href="#L1566">ngx_http_variable_request_method</a></li>
<li><a href="#L722">ngx_http_variable_request_set_size</a></li>
<li><a href="#L2033">ngx_http_variable_request_time</a></li>
<li><a href="#L1328">ngx_http_variable_scheme</a></li>
<li><a href="#L1825">ngx_http_variable_sent_connection</a></li>
<li><a href="#L1727">ngx_http_variable_sent_content_length</a></li>
<li><a href="#L1708">ngx_http_variable_sent_content_type</a></li>
<li><a href="#L1855">ngx_http_variable_sent_keep_alive</a></li>
<li><a href="#L1788">ngx_http_variable_sent_last_modified</a></li>
<li><a href="#L1764">ngx_http_variable_sent_location</a></li>
<li><a href="#L1888">ngx_http_variable_sent_transfer_encoding</a></li>
<li><a href="#L1267">ngx_http_variable_server_addr</a></li>
<li><a href="#L1548">ngx_http_variable_server_name</a></li>
<li><a href="#L1298">ngx_http_variable_server_port</a></li>
<li><a href="#L1380">ngx_http_variable_set_args</a></li>
<li><a href="#L1675">ngx_http_variable_status</a></li>
<li><a href="#L1032">ngx_http_variable_tcpinfo</a></li>
<li><a href="#L2218">ngx_http_variable_time_iso8601</a></li>
<li><a href="#L2242">ngx_http_variable_time_local</a></li>
<li><a href="#L880">ngx_http_variable_unknown_header</a></li>
<li><a href="#L860">ngx_http_variable_unknown_header_in</a></li>
<li><a href="#L870">ngx_http_variable_unknown_header_out</a></li>
<li><a href="#L2479">ngx_http_variables_add_core_vars</a></li>
<li><a href="#L2530">ngx_http_variables_init_vars</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Copyright (C) Igor Sysoev<br/></li>
<li></span><span class="Comment"> * Copyright (C) Nginx, Inc.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;ngx_config.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;ngx_core.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;ngx_http.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;<a href="modules/perl/ngx_http_perl_module.h.html#L21" title="src/http/modules/perl/ngx_http_perl_module.h:21">nginx</a>.h&gt;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="PreProc">#if 0<br/></li>
<li></span><span class="Comment">static void ngx_http_variable_request_set(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a> data);<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L700" title="src/http/ngx_http_variables.c:700">ngx_http_variable_request_get_size</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <span class="Type">void</span> <a href="#L722" title="src/http/ngx_http_variables.c:722">ngx_http_variable_request_set_size</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L748" title="src/http/ngx_http_variables.c:748">ngx_http_variable_header</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L771" title="src/http/ngx_http_variables.c:771">ngx_http_variable_cookies</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L779" title="src/http/ngx_http_variables.c:779">ngx_http_variable_headers</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L787" title="src/http/ngx_http_variables.c:787">ngx_http_variable_headers_internal</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data, u_char sep);<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L860" title="src/http/ngx_http_variables.c:860">ngx_http_variable_unknown_header_in</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L870" title="src/http/ngx_http_variables.c:870">ngx_http_variable_unknown_header_out</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L938" title="src/http/ngx_http_variables.c:938">ngx_http_variable_request_line</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L974" title="src/http/ngx_http_variables.c:974">ngx_http_variable_cookie</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1002" title="src/http/ngx_http_variables.c:1002">ngx_http_variable_argument</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="PreProc">#if (NGX_HAVE_TCP_INFO)<br/></li>
<li></span><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1032" title="src/http/ngx_http_variables.c:1032">ngx_http_variable_tcpinfo</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1085" title="src/http/ngx_http_variables.c:1085">ngx_http_variable_content_length</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1122" title="src/http/ngx_http_variables.c:1122">ngx_http_variable_host</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1147" title="src/http/ngx_http_variables.c:1147">ngx_http_variable_binary_remote_addr</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1187" title="src/http/ngx_http_variables.c:1187">ngx_http_variable_remote_addr</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1201" title="src/http/ngx_http_variables.c:1201">ngx_http_variable_remote_port</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1227" title="src/http/ngx_http_variables.c:1227">ngx_http_variable_proxy_protocol_addr</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1241" title="src/http/ngx_http_variables.c:1241">ngx_http_variable_proxy_protocol_port</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1267" title="src/http/ngx_http_variables.c:1267">ngx_http_variable_server_addr</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1298" title="src/http/ngx_http_variables.c:1298">ngx_http_variable_server_port</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1328" title="src/http/ngx_http_variables.c:1328">ngx_http_variable_scheme</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1356" title="src/http/ngx_http_variables.c:1356">ngx_http_variable_https</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <span class="Type">void</span> <a href="#L1380" title="src/http/ngx_http_variables.c:1380">ngx_http_variable_set_args</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1390" title="src/http/ngx_http_variables.c:1390">ngx_http_variable_is_args</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1411" title="src/http/ngx_http_variables.c:1411">ngx_http_variable_document_root</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1452" title="src/http/ngx_http_variables.c:1452">ngx_http_variable_realpath_root</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1525" title="src/http/ngx_http_variables.c:1525">ngx_http_variable_request_filename</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1548" title="src/http/ngx_http_variables.c:1548">ngx_http_variable_server_name</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1566" title="src/http/ngx_http_variables.c:1566">ngx_http_variable_request_method</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1585" title="src/http/ngx_http_variables.c:1585">ngx_http_variable_remote_user</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1612" title="src/http/ngx_http_variables.c:1612">ngx_http_variable_bytes_sent</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1633" title="src/http/ngx_http_variables.c:1633">ngx_http_variable_body_bytes_sent</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1661" title="src/http/ngx_http_variables.c:1661">ngx_http_variable_pipe</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1907" title="src/http/ngx_http_variables.c:1907">ngx_http_variable_request_completion</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1931" title="src/http/ngx_http_variables.c:1931">ngx_http_variable_request_body</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1992" title="src/http/ngx_http_variables.c:1992">ngx_http_variable_request_body_file</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2012" title="src/http/ngx_http_variables.c:2012">ngx_http_variable_request_length</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2033" title="src/http/ngx_http_variables.c:2033">ngx_http_variable_request_time</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2062" title="src/http/ngx_http_variables.c:2062">ngx_http_variable_request_id</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1675" title="src/http/ngx_http_variables.c:1675">ngx_http_variable_status</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1708" title="src/http/ngx_http_variables.c:1708">ngx_http_variable_sent_content_type</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1727" title="src/http/ngx_http_variables.c:1727">ngx_http_variable_sent_content_length</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1764" title="src/http/ngx_http_variables.c:1764">ngx_http_variable_sent_location</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1788" title="src/http/ngx_http_variables.c:1788">ngx_http_variable_sent_last_modified</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1825" title="src/http/ngx_http_variables.c:1825">ngx_http_variable_sent_connection</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1855" title="src/http/ngx_http_variables.c:1855">ngx_http_variable_sent_keep_alive</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L1888" title="src/http/ngx_http_variables.c:1888">ngx_http_variable_sent_transfer_encoding</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2103" title="src/http/ngx_http_variables.c:2103">ngx_http_variable_connection</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2124" title="src/http/ngx_http_variables.c:2124">ngx_http_variable_connection_requests</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2145" title="src/http/ngx_http_variables.c:2145">ngx_http_variable_nginx_version</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2159" title="src/http/ngx_http_variables.c:2159">ngx_http_variable_hostname</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2173" title="src/http/ngx_http_variables.c:2173">ngx_http_variable_pid</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2194" title="src/http/ngx_http_variables.c:2194">ngx_http_variable_msec</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2218" title="src/http/ngx_http_variables.c:2218">ngx_http_variable_time_iso8601</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L2242" title="src/http/ngx_http_variables.c:2242">ngx_http_variable_time_local</a>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data);<br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * </span><span class="Todo">TODO</span><span class="Comment">:<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp;&nbsp; Apache CGI: AUTH_TYPE, PATH_INFO (null), PATH_TRANSLATED<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; REMOTE_HOST (null), REMOTE_IDENT (null),<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; SERVER_SOFTWARE<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp;&nbsp; Apache SSI: DOCUMENT_NAME, LAST_MODIFIED, USER_NAME (file owner)<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * the $http_host, $http_user_agent, $http_referer, and $http_via<br/></li>
<li></span><span class="Comment"> * variables may be handled by generic<br/></li>
<li></span><span class="Comment"> * <a href="#L860" title="src/http/ngx_http_variables.c:860">ngx_http_variable_unknown_header_in</a>(), but for performance reasons<br/></li>
<li></span><span class="Comment"> * they are handled using dedicated entries<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><a id="L157">&#x200c;</a><span class="Type">static</span> <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; <span class="linkable">ngx_http_core_variables</span>[] = {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;http_host&quot;</span>), <span class="Constant">NULL</span>, <a href="#L748" title="src/http/ngx_http_variables.c:748">ngx_http_variable_header</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.host), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;http_user_agent&quot;</span>), <span class="Constant">NULL</span>, <a href="#L748" title="src/http/ngx_http_variables.c:748">ngx_http_variable_header</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.user_agent), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;http_referer&quot;</span>), <span class="Constant">NULL</span>, <a href="#L748" title="src/http/ngx_http_variables.c:748">ngx_http_variable_header</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.referer), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HTTP_GZIP)<br/></li>
<li></span>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;http_via&quot;</span>), <span class="Constant">NULL</span>, <a href="#L748" title="src/http/ngx_http_variables.c:748">ngx_http_variable_header</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.via), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if (NGX_HTTP_X_FORWARDED_FOR)<br/></li>
<li></span>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;http_x_forwarded_for&quot;</span>), <span class="Constant">NULL</span>, <a href="#L779" title="src/http/ngx_http_variables.c:779">ngx_http_variable_headers</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.x_forwarded_for), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;http_cookie&quot;</span>), <span class="Constant">NULL</span>, <a href="#L771" title="src/http/ngx_http_variables.c:771">ngx_http_variable_cookies</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.cookies), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;content_length&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1085" title="src/http/ngx_http_variables.c:1085">ngx_http_variable_content_length</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;content_type&quot;</span>), <span class="Constant">NULL</span>, <a href="#L748" title="src/http/ngx_http_variables.c:748">ngx_http_variable_header</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_in.content_type), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;host&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1122" title="src/http/ngx_http_variables.c:1122">ngx_http_variable_host</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;binary_remote_addr&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1147" title="src/http/ngx_http_variables.c:1147">ngx_http_variable_binary_remote_addr</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;remote_addr&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1187" title="src/http/ngx_http_variables.c:1187">ngx_http_variable_remote_addr</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;remote_port&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1201" title="src/http/ngx_http_variables.c:1201">ngx_http_variable_remote_port</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;proxy_protocol_addr&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1227" title="src/http/ngx_http_variables.c:1227">ngx_http_variable_proxy_protocol_addr</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;proxy_protocol_port&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1241" title="src/http/ngx_http_variables.c:1241">ngx_http_variable_proxy_protocol_port</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;server_addr&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1267" title="src/http/ngx_http_variables.c:1267">ngx_http_variable_server_addr</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;server_port&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1298" title="src/http/ngx_http_variables.c:1298">ngx_http_variable_server_port</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;server_protocol&quot;</span>), <span class="Constant">NULL</span>, <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, http_protocol), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;scheme&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1328" title="src/http/ngx_http_variables.c:1328">ngx_http_variable_scheme</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;https&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1356" title="src/http/ngx_http_variables.c:1356">ngx_http_variable_https</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_uri&quot;</span>), <span class="Constant">NULL</span>, <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, unparsed_uri), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;uri&quot;</span>), <span class="Constant">NULL</span>, <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, uri),<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;document_uri&quot;</span>), <span class="Constant">NULL</span>, <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, uri),<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request&quot;</span>), <span class="Constant">NULL</span>, <a href="#L938" title="src/http/ngx_http_variables.c:938">ngx_http_variable_request_line</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;document_root&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1411" title="src/http/ngx_http_variables.c:1411">ngx_http_variable_document_root</a>, <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;realpath_root&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1452" title="src/http/ngx_http_variables.c:1452">ngx_http_variable_realpath_root</a>, <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;query_string&quot;</span>), <span class="Constant">NULL</span>, <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, args),<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;args&quot;</span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1380" title="src/http/ngx_http_variables.c:1380">ngx_http_variable_set_args</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L660" title="src/http/ngx_http_variables.c:660">ngx_http_variable_request</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, args),<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L29" title="src/http/ngx_http_variables.h:29">NGX_HTTP_VAR_CHANGEABLE</a>|<a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;is_args&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1390" title="src/http/ngx_http_variables.c:1390">ngx_http_variable_is_args</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_filename&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1525" title="src/http/ngx_http_variables.c:1525">ngx_http_variable_request_filename</a>, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;server_name&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1548" title="src/http/ngx_http_variables.c:1548">ngx_http_variable_server_name</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_method&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1566" title="src/http/ngx_http_variables.c:1566">ngx_http_variable_request_method</a>, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;remote_user&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1585" title="src/http/ngx_http_variables.c:1585">ngx_http_variable_remote_user</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;bytes_sent&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1612" title="src/http/ngx_http_variables.c:1612">ngx_http_variable_bytes_sent</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;body_bytes_sent&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1633" title="src/http/ngx_http_variables.c:1633">ngx_http_variable_body_bytes_sent</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;pipe&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1661" title="src/http/ngx_http_variables.c:1661">ngx_http_variable_pipe</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_completion&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1907" title="src/http/ngx_http_variables.c:1907">ngx_http_variable_request_completion</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_body&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1931" title="src/http/ngx_http_variables.c:1931">ngx_http_variable_request_body</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_body_file&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1992" title="src/http/ngx_http_variables.c:1992">ngx_http_variable_request_body_file</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_length&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2012" title="src/http/ngx_http_variables.c:2012">ngx_http_variable_request_length</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_time&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2033" title="src/http/ngx_http_variables.c:2033">ngx_http_variable_request_time</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;request_id&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L2062" title="src/http/ngx_http_variables.c:2062">ngx_http_variable_request_id</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;status&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1675" title="src/http/ngx_http_variables.c:1675">ngx_http_variable_status</a>, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_content_type&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1708" title="src/http/ngx_http_variables.c:1708">ngx_http_variable_sent_content_type</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_content_length&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1727" title="src/http/ngx_http_variables.c:1727">ngx_http_variable_sent_content_length</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_location&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1764" title="src/http/ngx_http_variables.c:1764">ngx_http_variable_sent_location</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_last_modified&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1788" title="src/http/ngx_http_variables.c:1788">ngx_http_variable_sent_last_modified</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_connection&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1825" title="src/http/ngx_http_variables.c:1825">ngx_http_variable_sent_connection</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_keep_alive&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1855" title="src/http/ngx_http_variables.c:1855">ngx_http_variable_sent_keep_alive</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_transfer_encoding&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1888" title="src/http/ngx_http_variables.c:1888">ngx_http_variable_sent_transfer_encoding</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;sent_http_cache_control&quot;</span>), <span class="Constant">NULL</span>, <a href="#L779" title="src/http/ngx_http_variables.c:779">ngx_http_variable_headers</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, headers_out.cache_control), <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;limit_rate&quot;</span>), <a href="#L722" title="src/http/ngx_http_variables.c:722">ngx_http_variable_request_set_size</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L700" title="src/http/ngx_http_variables.c:700">ngx_http_variable_request_get_size</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; offsetof(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a>, limit_rate),<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L29" title="src/http/ngx_http_variables.h:29">NGX_HTTP_VAR_CHANGEABLE</a>|<a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;connection&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L2103" title="src/http/ngx_http_variables.c:2103">ngx_http_variable_connection</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;connection_requests&quot;</span>), <span class="Constant">NULL</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L2124" title="src/http/ngx_http_variables.c:2124">ngx_http_variable_connection_requests</a>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;<a href="../core/nginx.h.html#L12" title="src/core/nginx.h:12">nginx_version</a>&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2145" title="src/http/ngx_http_variables.c:2145">ngx_http_variable_nginx_version</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;hostname&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2159" title="src/http/ngx_http_variables.c:2159">ngx_http_variable_hostname</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;pid&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2173" title="src/http/ngx_http_variables.c:2173">ngx_http_variable_pid</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;<a href="../event/modules/ngx_iocp_module.c.html#L103" title="src/event/modules/ngx_iocp_module.c:103">msec</a>&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2194" title="src/http/ngx_http_variables.c:2194">ngx_http_variable_msec</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;time_iso8601&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2218" title="src/http/ngx_http_variables.c:2218">ngx_http_variable_time_iso8601</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;time_local&quot;</span>), <span class="Constant">NULL</span>, <a href="#L2242" title="src/http/ngx_http_variables.c:2242">ngx_http_variable_time_local</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_TCP_INFO)<br/></li>
<li></span>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;tcpinfo_rtt&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1032" title="src/http/ngx_http_variables.c:1032">ngx_http_variable_tcpinfo</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">0</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;tcpinfo_rttvar&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1032" title="src/http/ngx_http_variables.c:1032">ngx_http_variable_tcpinfo</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">1</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;tcpinfo_snd_cwnd&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1032" title="src/http/ngx_http_variables.c:1032">ngx_http_variable_tcpinfo</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">2</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L40" title="src/core/ngx_string.h:40">ngx_string</a>(<span class="Constant">&quot;tcpinfo_rcv_space&quot;</span>), <span class="Constant">NULL</span>, <a href="#L1032" title="src/http/ngx_http_variables.c:1032">ngx_http_variable_tcpinfo</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">3</span>, <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>, <span class="Constant">0</span> },<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; { <a href="../core/ngx_string.h.html#L41" title="src/core/ngx_string.h:41">ngx_null_string</a>, <span class="Constant">NULL</span>, <span class="Constant">NULL</span>, <span class="Constant">0</span>, <span class="Constant">0</span>, <span class="Constant">0</span> }<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L363">&#x200c;</a><a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>&nbsp; <span class="linkable">ngx_http_variable_null_value</span> =<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L19" title="src/http/ngx_http_variables.h:19">ngx_http_variable</a>(<span class="Constant">&quot;&quot;</span>);<br/></li>
<li><a id="L365">&#x200c;</a><a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>&nbsp; <span class="linkable">ngx_http_variable_true_value</span> =<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L19" title="src/http/ngx_http_variables.h:19">ngx_http_variable</a>(<span class="Constant">&quot;1&quot;</span>);<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a> *<br/></li>
<li><a id="L370">&#x200c;</a><span class="linkable">ngx_http_add_variable</span>(<a href="../core/ngx_core.h.html#L16" title="src/core/ngx_core.h:16">ngx_conf_t</a> *cf, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> flags)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rc;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L39" title="src/core/ngx_hash.h:39">ngx_hash_key_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *key;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *v;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;invalid variable name </span><span class="Special">\&quot;</span><span class="Constant">$</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L61" title="src/http/ngx_http_config.h:61">ngx_http_conf_get_module_main_conf</a>(cf, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; key = cmcf-&gt;variables_keys-&gt;keys.elts;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; cmcf-&gt;variables_keys-&gt;keys.nelts; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len != key[i].key.len<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || <a href="../core/ngx_string.c.html#L597" title="src/core/ngx_string.c:597">ngx_strncasecmp</a>(name-&gt;data, key[i].key.data, name-&gt;len) != <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v = key[i].value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!(v-&gt;flags &amp; <a href="ngx_http_variables.h.html#L29" title="src/http/ngx_http_variables.h:29">NGX_HTTP_VAR_CHANGEABLE</a>)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;the duplicate </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant"> variable&quot;</span>, name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> v;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(cf-&gt;pool, <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;name.len = name-&gt;len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;name.data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(cf-&gt;pool, name-&gt;len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;name.data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L21" title="src/core/ngx_string.c:21">ngx_strlow</a>(v-&gt;name.data, name-&gt;data, name-&gt;len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;set_handler = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;get_handler = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;flags = flags;<br/></li>
<li>&nbsp; &nbsp; v-&gt;index = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; rc = <a href="../core/ngx_hash.c.html#L714" title="src/core/ngx_hash.c:714">ngx_hash_add_key</a>(cmcf-&gt;variables_keys, &amp;v-&gt;name, v, <span class="Constant">0</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_core.h.html#L39" title="src/core/ngx_core.h:39">NGX_BUSY</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;conflicting variable name </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>, name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L441">&#x200c;</a><span class="linkable">ngx_http_get_variable_index</span>(<a href="../core/ngx_core.h.html#L16" title="src/core/ngx_core.h:16">ngx_conf_t</a> *cf, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *v;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;invalid variable name </span><span class="Special">\&quot;</span><span class="Constant">$</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L61" title="src/http/ngx_http_config.h:61">ngx_http_conf_get_module_main_conf</a>(cf, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = cmcf-&gt;variables.elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_array.h.html#L32" title="src/core/ngx_array.h:32">ngx_array_init</a>(&amp;cmcf-&gt;variables, cf-&gt;pool, <span class="Constant">4</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; cmcf-&gt;variables.nelts; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len != v[i].name.len<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || <a href="../core/ngx_string.c.html#L597" title="src/core/ngx_string.c:597">ngx_strncasecmp</a>(name-&gt;data, v[i].name.data, name-&gt;len) != <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = <a href="../core/ngx_array.c.html#L48" title="src/core/ngx_array.c:48">ngx_array_push</a>(&amp;cmcf-&gt;variables);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;name.len = name-&gt;len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;name.data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(cf-&gt;pool, name-&gt;len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;name.data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L21" title="src/core/ngx_string.c:21">ngx_strlow</a>(v-&gt;name.data, name-&gt;data, name-&gt;len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;set_handler = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;get_handler = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;flags = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;index = cmcf-&gt;variables.nelts - <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> v-&gt;index;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *<br/></li>
<li><a id="L501">&#x200c;</a><span class="linkable">ngx_http_get_indexed_variable</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> index)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *v;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L55" title="src/http/ngx_http_config.h:55">ngx_http_get_module_main_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (cmcf-&gt;variables.nelts &lt;= index) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.c.html#L216" title="src/core/ngx_log.c:216">ngx_log_error</a>(<a href="../core/ngx_log.h.html#L18" title="src/core/ngx_log.h:18">NGX_LOG_ALERT</a>, r-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;unknown variable index: </span><span class="Special">%u</span><span class="Constant">i&quot;</span>, index);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;variables[index].not_found || r-&gt;variables[index].valid) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> &amp;r-&gt;variables[index];<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = cmcf-&gt;variables.elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v[index].get_handler(r, &amp;r-&gt;variables[index], v[index].data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[index].flags &amp; <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r-&gt;variables[index].no_cacheable = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> &amp;r-&gt;variables[index];<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; r-&gt;variables[index].valid = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; r-&gt;variables[index].not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *<br/></li>
<li><a id="L538">&#x200c;</a><span class="linkable">ngx_http_get_flushed_variable</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> index)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>&nbsp; *v;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = &amp;r-&gt;variables[index];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;valid || v-&gt;not_found) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!v-&gt;no_cacheable) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> v;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L501" title="src/http/ngx_http_variables.c:501">ngx_http_get_indexed_variable</a>(r, index);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *<br/></li>
<li><a id="L558">&#x200c;</a><span class="linkable">ngx_http_get_variable</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> key)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *v;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>&nbsp; *vv;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L55" title="src/http/ngx_http_config.h:55">ngx_http_get_module_main_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = <a href="../core/ngx_hash.c.html#L13" title="src/core/ngx_hash.c:13">ngx_hash_find</a>(&amp;cmcf-&gt;variables_hash, key, name-&gt;data, name-&gt;len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;flags &amp; <a href="ngx_http_variables.h.html#L31" title="src/http/ngx_http_variables.h:31">NGX_HTTP_VAR_INDEXED</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="#L538" title="src/http/ngx_http_variables.c:538">ngx_http_get_flushed_variable</a>(r, v-&gt;index);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vv = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (vv &amp;&amp; v-&gt;get_handler(r, vv, v-&gt;data) == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; vv = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (vv == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len &gt;= <span class="Constant">5</span> &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(name-&gt;data, <span class="Constant">&quot;http_&quot;</span>, <span class="Constant">5</span>) == <span class="Constant">0</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L860" title="src/http/ngx_http_variables.c:860">ngx_http_variable_unknown_header_in</a>(r, vv, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) name)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len &gt;= <span class="Constant">10</span> &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(name-&gt;data, <span class="Constant">&quot;sent_http_&quot;</span>, <span class="Constant">10</span>) == <span class="Constant">0</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L870" title="src/http/ngx_http_variables.c:870">ngx_http_variable_unknown_header_out</a>(r, vv, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) name)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len &gt;= <span class="Constant">14</span> &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(name-&gt;data, <span class="Constant">&quot;upstream_http_&quot;</span>, <span class="Constant">14</span>) == <span class="Constant">0</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_upstream.c.html#L5282" title="src/http/ngx_http_upstream.c:5282">ngx_http_upstream_header_variable</a>(r, vv, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) name)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len &gt;= <span class="Constant">7</span> &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(name-&gt;data, <span class="Constant">&quot;cookie_&quot;</span>, <span class="Constant">7</span>) == <span class="Constant">0</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L974" title="src/http/ngx_http_variables.c:974">ngx_http_variable_cookie</a>(r, vv, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) name) == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len &gt;= <span class="Constant">16<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(name-&gt;data, <span class="Constant">&quot;upstream_cookie_&quot;</span>, <span class="Constant">16</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_upstream.c.html#L5297" title="src/http/ngx_http_upstream.c:5297">ngx_http_upstream_cookie_variable</a>(r, vv, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) name)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name-&gt;len &gt;= <span class="Constant">4</span> &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(name-&gt;data, <span class="Constant">&quot;arg_&quot;</span>, <span class="Constant">4</span>) == <span class="Constant">0</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L1002" title="src/http/ngx_http_variables.c:1002">ngx_http_variable_argument</a>(r, vv, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) name) == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; vv-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> vv;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L660">&#x200c;</a><span class="linkable">ngx_http_variable_request</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; *s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) ((<span class="Type">char</span> *) r + data);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (s-&gt;data) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = s-&gt;len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = s-&gt;data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="PreProc">#if 0<br/></li>
<li></span><br/></li>
<li><span class="Comment">static void<br/></li>
<li></span><span class="Comment">ngx_http_variable_request_set(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a> data)<br/></li>
<li></span><span class="Comment">{<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; *s;<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; s = (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) ((char *) r + data);<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; s-&gt;len = v-&gt;len;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; s-&gt;data = v-&gt;data;<br/></li>
<li></span><span class="Comment">}<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L700">&#x200c;</a><span class="linkable">ngx_http_variable_request_get_size</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; *sp;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; sp = (<span class="Type">size_t</span> *) ((<span class="Type">char</span> *) r + data);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L200" title="src/os/win32/ngx_win32_config.h:200">NGX_SIZE_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(v-&gt;data, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">z&quot;</span>, *sp) - v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L722">&#x200c;</a></span><span class="linkable">ngx_http_variable_request_set_size</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span>&nbsp; &nbsp; s, *sp;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; val;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; val.len = v-&gt;len;<br/></li>
<li>&nbsp; &nbsp; val.data = v-&gt;data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = <a href="../core/ngx_parse.c.html#L13" title="src/core/ngx_parse.c:13">ngx_parse_size</a>(&amp;val);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (s == <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.c.html#L216" title="src/core/ngx_log.c:216">ngx_log_error</a>(<a href="../core/ngx_log.h.html#L20" title="src/core/ngx_log.h:20">NGX_LOG_ERR</a>, r-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;invalid size </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>, &amp;val);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; sp = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> *) ((<span class="Type">char</span> *) r + data);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; *sp = s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L748">&#x200c;</a><span class="linkable">ngx_http_variable_header</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L97" title="src/core/ngx_hash.h:97">ngx_table_elt_t</a>&nbsp; *h;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; h = *(<a href="../core/ngx_hash.h.html#L97" title="src/core/ngx_hash.h:97">ngx_table_elt_t</a> **) ((<span class="Type">char</span> *) r + data);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (h) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = h-&gt;value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = h-&gt;value.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L771">&#x200c;</a><span class="linkable">ngx_http_variable_cookies</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L787" title="src/http/ngx_http_variables.c:787">ngx_http_variable_headers_internal</a>(r, v, data, <span class="Constant">';'</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L779">&#x200c;</a><span class="linkable">ngx_http_variable_headers</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L787" title="src/http/ngx_http_variables.c:787">ngx_http_variable_headers_internal</a>(r, v, data, <span class="Constant">','</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L787">&#x200c;</a><span class="linkable">ngx_http_variable_headers_internal</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data, u_char sep)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; len;<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *p, *end;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; i, n;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_array.h.html#L22" title="src/core/ngx_array.h:22">ngx_array_t</a>&nbsp; &nbsp; &nbsp;&nbsp; *a;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L97" title="src/core/ngx_hash.h:97">ngx_table_elt_t</a>&nbsp; **h;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; a = (<a href="../core/ngx_array.h.html#L22" title="src/core/ngx_array.h:22">ngx_array_t</a> *) ((<span class="Type">char</span> *) r + data);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = a-&gt;nelts;<br/></li>
<li>&nbsp; &nbsp; h = a-&gt;elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; n; i++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (h[i]-&gt;hash == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len += h[i]-&gt;value.len + <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (len == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len -= <span class="Constant">2</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (n == <span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = (*h)-&gt;value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = (*h)-&gt;value.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; end = p + len;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; <span class="Comment">/* void */</span> ; i++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (h[i]-&gt;hash == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_string.h.html#L116" title="src/core/ngx_string.h:116">ngx_copy</a>(p, h[i]-&gt;value.data, h[i]-&gt;value.len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == end) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *p++ = sep; *p++ = <span class="Constant">' '</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L860">&#x200c;</a><span class="linkable">ngx_http_variable_unknown_header_in</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L880" title="src/http/ngx_http_variables.c:880">ngx_http_variable_unknown_header</a>(v, (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) data,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;r-&gt;headers_in.headers.part,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<span class="Constant">&quot;http_&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L870">&#x200c;</a><span class="linkable">ngx_http_variable_unknown_header_out</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L880" title="src/http/ngx_http_variables.c:880">ngx_http_variable_unknown_header</a>(v, (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) data,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;r-&gt;headers_out.headers.part,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<span class="Constant">&quot;sent_http_&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L880">&#x200c;</a><span class="linkable">ngx_http_variable_unknown_header</span>(<a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *var,<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_list.h.html#L16" title="src/core/ngx_list.h:16">ngx_list_part_t</a> *part, <span class="Type">size_t</span> prefix)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; i, n;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L97" title="src/core/ngx_hash.h:97">ngx_table_elt_t</a>&nbsp; *header;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; header = part-&gt;elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; <span class="Comment">/* void */</span> ; i++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &gt;= part-&gt;nelts) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (part-&gt;next == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; part = part-&gt;next;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; header = part-&gt;elts;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (header[i].hash == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (n = <span class="Constant">0</span>; n + prefix &lt; var-&gt;len &amp;&amp; n &lt; header[i].key.len; n++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch = header[i].key.data[n];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (ch &gt;= <span class="Constant">'A'</span> &amp;&amp; ch &lt;= <span class="Constant">'Z'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch |= <span class="Constant">0x20</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (ch == <span class="Constant">'-'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch = <span class="Constant">'_'</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (var-&gt;data[n + prefix] != ch) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (n + prefix == var-&gt;len &amp;&amp; n == header[i].key.len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = header[i].value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = header[i].value.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L938">&#x200c;</a><span class="linkable">ngx_http_variable_request_line</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p, *s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = r-&gt;request_line.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (s == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s = r-&gt;request_start;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (s == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (p = s; p &lt; r-&gt;header_in-&gt;last; p++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*p == <a href="../core/ngx_core.h.html#L96" title="src/core/ngx_core.h:96">CR</a> || *p == <a href="../core/ngx_core.h.html#L95" title="src/core/ngx_core.h:95">LF</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; r-&gt;request_line.len = p - s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; r-&gt;request_line.data = s;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = r-&gt;request_line.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L974">&#x200c;</a><span class="linkable">ngx_http_variable_cookie</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name = (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; cookie, s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s.len = name-&gt;len - (<span class="Statement">sizeof</span>(<span class="Constant">&quot;cookie_&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; s.data = name-&gt;data + <span class="Statement">sizeof</span>(<span class="Constant">&quot;cookie_&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_parse.c.html#L1931" title="src/http/ngx_http_parse.c:1931">ngx_http_parse_multi_header_lines</a>(&amp;r-&gt;headers_in.cookies, &amp;s, &amp;cookie)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; == <a href="../core/ngx_core.h.html#L41" title="src/core/ngx_core.h:41">NGX_DECLINED</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = cookie.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = cookie.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1002">&#x200c;</a><span class="linkable">ngx_http_variable_argument</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name = (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp;&nbsp; *arg;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp;&nbsp; value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = name-&gt;len - (<span class="Statement">sizeof</span>(<span class="Constant">&quot;arg_&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; arg = name-&gt;data + <span class="Statement">sizeof</span>(<span class="Constant">&quot;arg_&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_parse.c.html#L2055" title="src/http/ngx_http_parse.c:2055">ngx_http_arg</a>(r, arg, len, &amp;value) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = value.data;<br/></li>
<li>&nbsp; &nbsp; v-&gt;len = value.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_TCP_INFO)<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1032">&#x200c;</a><span class="linkable">ngx_http_variable_tcpinfo</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">struct</span> tcp_info&nbsp; ti;<br/></li>
<li>&nbsp; &nbsp; <a href="../os/win32/ngx_socket.h.html#L20" title="src/os/win32/ngx_socket.h:20">socklen_t</a>&nbsp; &nbsp; &nbsp; &nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L132" title="src/os/win32/ngx_win32_config.h:132">uint32_t</a></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = <span class="Statement">sizeof</span>(<span class="Type">struct</span> tcp_info);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (getsockopt(r-&gt;connection-&gt;fd, IPPROTO_TCP, TCP_INFO, &amp;ti, &amp;len) == -<span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../core/ngx_config.h.html#L83" title="src/core/ngx_config.h:83">NGX_INT32_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">switch</span> (data) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">0</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; value = ti.tcpi_rtt;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">1</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; value = ti.tcpi_rttvar;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">2</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; value = ti.tcpi_snd_cwnd;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">3</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; value = ti.tcpi_rcv_space;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* suppress warning */<br/></li>
<li></span><span class="cUserCont">&nbsp; &nbsp; </span><span class="Statement">default</span><span class="cUserCont">:<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; value = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(v-&gt;data, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">D&quot;</span>, value) - v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1085">&#x200c;</a><span class="linkable">ngx_http_variable_content_length</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_in.content_length) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;headers_in.content_length-&gt;value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;headers_in.content_length-&gt;value.data;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (r-&gt;reading_body) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (r-&gt;headers_in.content_length_n &gt;= <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L218" title="src/os/win32/ngx_win32_config.h:218">NGX_OFF_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%O</span><span class="Constant">&quot;</span>, r-&gt;headers_in.content_length_n) - p;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1122">&#x200c;</a><span class="linkable">ngx_http_variable_host</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L208" title="src/http/ngx_http_core_module.h:208">ngx_http_core_srv_conf_t</a>&nbsp; *cscf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_in.server.len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;headers_in.server.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;headers_in.server.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; cscf = <a href="ngx_http_config.h.html#L57" title="src/http/ngx_http_config.h:57">ngx_http_get_module_srv_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = cscf-&gt;server_name.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = cscf-&gt;server_name.data;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1147">&#x200c;</a><span class="linkable">ngx_http_variable_binary_remote_addr</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">struct</span> sockaddr_in&nbsp;&nbsp; *sin;<br/></li>
<li><span class="PreProc">#if (NGX_HAVE_INET6)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Type">struct</span> sockaddr_in6&nbsp; *sin6;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">switch</span> (r-&gt;connection-&gt;sockaddr-&gt;sa_family) {<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_INET6)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">case</span> AF_INET6:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; sin6 = (<span class="Type">struct</span> sockaddr_in6 *) r-&gt;connection-&gt;sockaddr;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<span class="Type">struct</span> in6_addr);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = sin6-&gt;sin6_addr.s6_addr;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="cUserCont">&nbsp; &nbsp; </span><span class="Statement">default</span><span class="cUserCont">:</span> <span class="Comment">/* AF_INET */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; sin = (<span class="Type">struct</span> sockaddr_in *) r-&gt;connection-&gt;sockaddr;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<a href="../os/win32/ngx_win32_config.h.html#L192" title="src/os/win32/ngx_win32_config.h:192">in_addr_t</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = (u_char *) &amp;sin-&gt;sin_addr;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1187">&#x200c;</a><span class="linkable">ngx_http_variable_remote_addr</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;len = r-&gt;connection-&gt;addr_text.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = r-&gt;connection-&gt;addr_text.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1201">&#x200c;</a><span class="linkable">ngx_http_variable_remote_port</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; port;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<span class="Constant">&quot;65535&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; port = <a href="../core/ngx_inet.c.html#L1345" title="src/core/ngx_inet.c:1345">ngx_inet_get_port</a>(r-&gt;connection-&gt;sockaddr);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (port &gt; <span class="Constant">0</span> &amp;&amp; port &lt; <span class="Constant">65536</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(v-&gt;data, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">i&quot;</span>, port) - v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1227">&#x200c;</a><span class="linkable">ngx_http_variable_proxy_protocol_addr</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;len = r-&gt;connection-&gt;proxy_protocol_addr.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = r-&gt;connection-&gt;proxy_protocol_addr.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1241">&#x200c;</a><span class="linkable">ngx_http_variable_proxy_protocol_port</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; port;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<span class="Constant">&quot;65535&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; port = r-&gt;connection-&gt;proxy_protocol_port;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (port &gt; <span class="Constant">0</span> &amp;&amp; port &lt; <span class="Constant">65536</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(v-&gt;data, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">i&quot;</span>, port) - v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1267">&#x200c;</a><span class="linkable">ngx_http_variable_server_addr</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; s;<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp;&nbsp; addr[<a href="../core/ngx_inet.h.html#L23" title="src/core/ngx_inet.h:23">NGX_SOCKADDR_STRLEN</a>];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s.len = <a href="../core/ngx_inet.h.html#L23" title="src/core/ngx_inet.h:23">NGX_SOCKADDR_STRLEN</a>;<br/></li>
<li>&nbsp; &nbsp; s.data = addr;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_connection.c.html#L1276" title="src/core/ngx_connection.c:1276">ngx_connection_local_sockaddr</a>(r-&gt;connection, &amp;s, <span class="Constant">0</span>) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s.data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, s.len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (s.data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L1966" title="src/core/ngx_string.c:1966">ngx_memcpy</a>(s.data, addr, s.len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = s.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = s.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1298">&#x200c;</a><span class="linkable">ngx_http_variable_server_port</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; port;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_connection.c.html#L1276" title="src/core/ngx_connection.c:1276">ngx_connection_local_sockaddr</a>(r-&gt;connection, <span class="Constant">NULL</span>, <span class="Constant">0</span>) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<span class="Constant">&quot;65535&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; port = <a href="../core/ngx_inet.c.html#L1345" title="src/core/ngx_inet.c:1345">ngx_inet_get_port</a>(r-&gt;connection-&gt;local_sockaddr);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (port &gt; <span class="Constant">0</span> &amp;&amp; port &lt; <span class="Constant">65536</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(v-&gt;data, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">i&quot;</span>, port) - v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1328">&#x200c;</a><span class="linkable">ngx_http_variable_scheme</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li><span class="PreProc">#if (NGX_HTTP_SSL)<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;connection-&gt;ssl) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;https&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;https&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;http&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;http&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1356">&#x200c;</a><span class="linkable">ngx_http_variable_https</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li><span class="PreProc">#if (NGX_HTTP_SSL)<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;connection-&gt;ssl) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;on&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;on&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; *v = <a href="#L363" title="src/http/ngx_http_variables.c:363">ngx_http_variable_null_value</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1380">&#x200c;</a></span><span class="linkable">ngx_http_variable_set_args</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; r-&gt;args.len = v-&gt;len;<br/></li>
<li>&nbsp; &nbsp; r-&gt;args.data = v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; r-&gt;valid_unparsed_uri = <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1390">&#x200c;</a><span class="linkable">ngx_http_variable_is_args</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;args.len == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;?&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1411">&#x200c;</a><span class="linkable">ngx_http_variable_document_root</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L57" title="src/http/ngx_http_core_module.h:57">ngx_http_core_loc_conf_t</a>&nbsp; *clcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; clcf = <a href="ngx_http_config.h.html#L58" title="src/http/ngx_http_config.h:58">ngx_http_get_module_loc_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (clcf-&gt;root_lengths == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = clcf-&gt;root.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = clcf-&gt;root.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_script.c.html#L486" title="src/http/ngx_http_script.c:486">ngx_http_script_run</a>(r, &amp;path, clcf-&gt;root_lengths-&gt;elts, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clcf-&gt;root_values-&gt;elts)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; == <span class="Constant">NULL</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_file.c.html#L21" title="src/core/ngx_file.c:21">ngx_get_full_name</a>(r-&gt;pool, (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) &amp;<a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;prefix, &amp;path)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = path.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = path.data;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1452">&#x200c;</a><span class="linkable">ngx_http_variable_realpath_root</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *real;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L57" title="src/http/ngx_http_core_module.h:57">ngx_http_core_loc_conf_t</a>&nbsp; *clcf;<br/></li>
<li><span class="PreProc">#if (<a href="../os/win32/ngx_files.h.html#L181" title="src/os/win32/ngx_files.h:181">NGX_HAVE_MAX_PATH</a>)<br/></li>
<li></span>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; buffer[<a href="../os/win32/ngx_files.h.html#L182" title="src/os/win32/ngx_files.h:182">NGX_MAX_PATH</a>];<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; clcf = <a href="ngx_http_config.h.html#L58" title="src/http/ngx_http_config.h:58">ngx_http_get_module_loc_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (clcf-&gt;root_lengths == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; path = clcf-&gt;root;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_script.c.html#L486" title="src/http/ngx_http_script.c:486">ngx_http_script_run</a>(r, &amp;path, clcf-&gt;root_lengths-&gt;elts, <span class="Constant">1</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clcf-&gt;root_values-&gt;elts)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; == <span class="Constant">NULL</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; path.data[path.len - <span class="Constant">1</span>] = <span class="Special">'\0'</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_file.c.html#L21" title="src/core/ngx_file.c:21">ngx_get_full_name</a>(r-&gt;pool, (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) &amp;<a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;prefix, &amp;path)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (<a href="../os/win32/ngx_files.h.html#L181" title="src/os/win32/ngx_files.h:181">NGX_HAVE_MAX_PATH</a>)<br/></li>
<li></span>&nbsp; &nbsp; real = buffer;<br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span>&nbsp; &nbsp; real = <span class="Constant">NULL</span>;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; real = <a href="../os/win32/ngx_files.c.html#L419" title="src/os/win32/ngx_files.c:419">ngx_realpath</a>(path.data, real);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (real == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.c.html#L216" title="src/core/ngx_log.c:216">ngx_log_error</a>(<a href="../core/ngx_log.h.html#L19" title="src/core/ngx_log.h:19">NGX_LOG_CRIT</a>, r-&gt;connection-&gt;log, <a href="../os/win32/ngx_errno.h.html#L18" title="src/os/win32/ngx_errno.h:18">ngx_errno</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../os/win32/ngx_files.h.html#L176" title="src/os/win32/ngx_files.h:176">ngx_realpath_n</a> <span class="Constant">&quot; </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant"> failed&quot;</span>, path.data);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = <a href="../core/ngx_string.h.html#L61" title="src/core/ngx_string.h:61">ngx_strlen</a>(real);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li><span class="PreProc">#if !(<a href="../os/win32/ngx_files.h.html#L181" title="src/os/win32/ngx_files.h:181">NGX_HAVE_MAX_PATH</a>)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../os/win32/ngx_alloc.h.html#L19" title="src/os/win32/ngx_alloc.h:19">ngx_free</a>(real);<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L1966" title="src/core/ngx_string.c:1966">ngx_memcpy</a>(v-&gt;data, real, len);<br/></li>
<li><br/></li>
<li><span class="PreProc">#if !(<a href="../os/win32/ngx_files.h.html#L181" title="src/os/win32/ngx_files.h:181">NGX_HAVE_MAX_PATH</a>)<br/></li>
<li></span>&nbsp; &nbsp; <a href="../os/win32/ngx_alloc.h.html#L19" title="src/os/win32/ngx_alloc.h:19">ngx_free</a>(real);<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1525">&#x200c;</a><span class="linkable">ngx_http_variable_request_filename</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp;&nbsp; root;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; path;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="ngx_http_core_module.c.html#L1991" title="src/http/ngx_http_core_module.c:1991">ngx_http_map_uri_to_path</a>(r, &amp;path, &amp;root, <span class="Constant">0</span>) == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* <a href="ngx_http_core_module.c.html#L1991" title="src/http/ngx_http_core_module.c:1991">ngx_http_map_uri_to_path</a>() allocates memory for terminating '\0' */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = path.len - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = path.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1548">&#x200c;</a><span class="linkable">ngx_http_variable_server_name</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L208" title="src/http/ngx_http_core_module.h:208">ngx_http_core_srv_conf_t</a>&nbsp; *cscf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cscf = <a href="ngx_http_config.h.html#L57" title="src/http/ngx_http_config.h:57">ngx_http_get_module_srv_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = cscf-&gt;server_name.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = cscf-&gt;server_name.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1566">&#x200c;</a><span class="linkable">ngx_http_variable_request_method</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>-&gt;method_name.data) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>-&gt;method_name.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>-&gt;method_name.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1585">&#x200c;</a><span class="linkable">ngx_http_variable_remote_user</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a>&nbsp; rc;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; rc = <a href="ngx_http_core_module.c.html#L2064" title="src/http/ngx_http_core_module.c:2064">ngx_http_auth_basic_user</a>(r);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_core.h.html#L41" title="src/core/ngx_core.h:41">NGX_DECLINED</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = r-&gt;headers_in.user.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = r-&gt;headers_in.user.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1612">&#x200c;</a><span class="linkable">ngx_http_variable_bytes_sent</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L218" title="src/os/win32/ngx_win32_config.h:218">NGX_OFF_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%O</span><span class="Constant">&quot;</span>, r-&gt;connection-&gt;sent) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1633">&#x200c;</a><span class="linkable">ngx_http_variable_body_bytes_sent</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span>&nbsp; &nbsp; sent;<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; sent = r-&gt;connection-&gt;sent - r-&gt;header_size;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sent &lt; <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; sent = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L218" title="src/os/win32/ngx_win32_config.h:218">NGX_OFF_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%O</span><span class="Constant">&quot;</span>, sent) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1661">&#x200c;</a><span class="linkable">ngx_http_variable_pipe</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = (u_char *) (r-&gt;pipeline ? <span class="Constant">&quot;p&quot;</span> : <span class="Constant">&quot;.&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1675">&#x200c;</a><span class="linkable">ngx_http_variable_status</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; status;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../core/ngx_config.h.html#L87" title="src/core/ngx_config.h:87">NGX_INT_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;err_status) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; status = r-&gt;err_status;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (r-&gt;headers_out.status) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; status = r-&gt;headers_out.status;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (r-&gt;http_version == <a href="ngx_http_request.h.html#L23" title="src/http/ngx_http_request.h:23">NGX_HTTP_VERSION_9</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; status = <span class="Constant">9</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; status = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(v-&gt;data, <span class="Constant">&quot;</span><span class="Special">%03u</span><span class="Constant">i&quot;</span>, status) - v-&gt;data;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1708">&#x200c;</a><span class="linkable">ngx_http_variable_sent_content_type</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.content_type.len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;headers_out.content_type.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;headers_out.content_type.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1727">&#x200c;</a><span class="linkable">ngx_http_variable_sent_content_length</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.content_length) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;headers_out.content_length-&gt;value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;headers_out.content_length-&gt;value.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.content_length_n &gt;= <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L218" title="src/os/win32/ngx_win32_config.h:218">NGX_OFF_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%O</span><span class="Constant">&quot;</span>, r-&gt;headers_out.content_length_n) - p;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1764">&#x200c;</a><span class="linkable">ngx_http_variable_sent_location</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; name;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.location) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;headers_out.location-&gt;value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;headers_out.location-&gt;value.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L42" title="src/core/ngx_string.h:42">ngx_str_set</a>(&amp;name, <span class="Constant">&quot;sent_http_location&quot;</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L880" title="src/http/ngx_http_variables.c:880">ngx_http_variable_unknown_header</a>(v, &amp;name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;r-&gt;headers_out.headers.part,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<span class="Constant">&quot;sent_http_&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1788">&#x200c;</a><span class="linkable">ngx_http_variable_sent_last_modified</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.last_modified) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = r-&gt;headers_out.last_modified-&gt;value.len;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = r-&gt;headers_out.last_modified-&gt;value.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.last_modified_time &gt;= <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<span class="Constant">&quot;Mon, 28 Sep 1970 06:00:00 GMT&quot;</span>) - <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_times.c.html#L255" title="src/core/ngx_times.c:255">ngx_http_time</a>(p, r-&gt;headers_out.last_modified_time) - p;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1825">&#x200c;</a><span class="linkable">ngx_http_variable_sent_connection</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp;&nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>&nbsp; &nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;headers_out.status == <a href="ngx_http_request.h.html#L69" title="src/http/ngx_http_request.h:69">NGX_HTTP_SWITCHING_PROTOCOLS</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;upgrade&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <span class="Constant">&quot;upgrade&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (r-&gt;keepalive) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;keep-alive&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <span class="Constant">&quot;keep-alive&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;close&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <span class="Constant">&quot;close&quot;</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = (u_char *) p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1855">&#x200c;</a><span class="linkable">ngx_http_variable_sent_keep_alive</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L57" title="src/http/ngx_http_core_module.h:57">ngx_http_core_loc_conf_t</a>&nbsp; *clcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;keepalive) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; clcf = <a href="ngx_http_config.h.html#L58" title="src/http/ngx_http_config.h:58">ngx_http_get_module_loc_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (clcf-&gt;keepalive_header) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <span class="Statement">sizeof</span>(<span class="Constant">&quot;timeout=&quot;</span>) - <span class="Constant">1</span> + <a href="../os/win32/ngx_win32_config.h.html#L202" title="src/os/win32/ngx_win32_config.h:202">NGX_TIME_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;timeout=%T&quot;</span>, clcf-&gt;keepalive_header) - p;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1888">&#x200c;</a><span class="linkable">ngx_http_variable_sent_transfer_encoding</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;chunked) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<span class="Constant">&quot;chunked&quot;</span>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;chunked&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1907">&#x200c;</a><span class="linkable">ngx_http_variable_request_completion</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;request_complete) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;OK&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = (u_char *) <span class="Constant">&quot;&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1931">&#x200c;</a><span class="linkable">ngx_http_variable_request_body</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp;&nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_buf.h.html#L18" title="src/core/ngx_buf.h:18">ngx_buf_t</a>&nbsp; &nbsp; *buf;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_core.h.html#L19" title="src/core/ngx_core.h:19">ngx_chain_t</a>&nbsp; *cl;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;request_body == <span class="Constant">NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; || r-&gt;request_body-&gt;bufs == <span class="Constant">NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; || r-&gt;request_body-&gt;temp_file)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cl = r-&gt;request_body-&gt;bufs;<br/></li>
<li>&nbsp; &nbsp; buf = cl-&gt;buf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (cl-&gt;next == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;len = buf-&gt;last - buf-&gt;pos;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;data = buf-&gt;pos;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = buf-&gt;last - buf-&gt;pos;<br/></li>
<li>&nbsp; &nbsp; cl = cl-&gt;next;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> ( <span class="Comment">/* void */</span> ; cl; cl = cl-&gt;next) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; buf = cl-&gt;buf;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len += buf-&gt;last - buf-&gt;pos;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li>&nbsp; &nbsp; cl = r-&gt;request_body-&gt;bufs;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> ( <span class="Comment">/* void */</span> ; cl; cl = cl-&gt;next) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; buf = cl-&gt;buf;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_string.h.html#L93" title="src/core/ngx_string.h:93">ngx_cpymem</a>(p, buf-&gt;pos, buf-&gt;last - buf-&gt;pos);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L1992">&#x200c;</a><span class="linkable">ngx_http_variable_request_body_file</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;request_body == <span class="Constant">NULL</span> || r-&gt;request_body-&gt;temp_file == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = r-&gt;request_body-&gt;temp_file-&gt;file.name.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = r-&gt;request_body-&gt;temp_file-&gt;file.name.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2012">&#x200c;</a><span class="linkable">ngx_http_variable_request_length</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L218" title="src/os/win32/ngx_win32_config.h:218">NGX_OFF_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%O</span><span class="Constant">&quot;</span>, r-&gt;request_length) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2033">&#x200c;</a><span class="linkable">ngx_http_variable_request_time</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_times.h.html#L20" title="src/core/ngx_times.h:20">ngx_time_t</a>&nbsp; &nbsp; &nbsp; *tp;<br/></li>
<li>&nbsp; &nbsp; <a href="../os/win32/ngx_time.h.html#L17" title="src/os/win32/ngx_time.h:17">ngx_msec_int_t</a>&nbsp;&nbsp; ms;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L202" title="src/os/win32/ngx_win32_config.h:202">NGX_TIME_T_LEN</a> + <span class="Constant">4</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; tp = <a href="../core/ngx_times.h.html#L37" title="src/core/ngx_times.h:37">ngx_timeofday</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; ms = (<a href="../os/win32/ngx_time.h.html#L17" title="src/os/win32/ngx_time.h:17">ngx_msec_int_t</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((tp-&gt;sec - r-&gt;start_sec) * <span class="Constant">1000</span> + (tp-&gt;<a href="../event/modules/ngx_iocp_module.c.html#L103" title="src/event/modules/ngx_iocp_module.c:103">msec</a> - r-&gt;start_msec));<br/></li>
<li>&nbsp; &nbsp; ms = <a href="../core/ngx_core.h.html#L101" title="src/core/ngx_core.h:101">ngx_max</a>(ms, <span class="Constant">0</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;%T.%03M&quot;</span>, (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L68" title="src/os/win32/ngx_win32_config.h:68">time_t</a></span>) ms / <span class="Constant">1000</span>, ms % <span class="Constant">1000</span>) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2062">&#x200c;</a><span class="linkable">ngx_http_variable_request_id</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *id;<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_OPENSSL)<br/></li>
<li></span>&nbsp; &nbsp; u_char&nbsp;&nbsp; random_bytes[<span class="Constant">16</span>];<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; id = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <span class="Constant">32</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (id == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Constant">32</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = id;<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_OPENSSL)<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (RAND_bytes(random_bytes, <span class="Constant">16</span>) == <span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_string.c.html#L1108" title="src/core/ngx_string.c:1108">ngx_hex_dump</a>(id, random_bytes, <span class="Constant">16</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../event/ngx_event_openssl.c.html#L2137" title="src/event/ngx_event_openssl.c:2137">ngx_ssl_error</a>(<a href="../core/ngx_log.h.html#L20" title="src/core/ngx_log.h:20">NGX_LOG_ERR</a>, r-&gt;connection-&gt;log, <span class="Constant">0</span>, <span class="Constant">&quot;RAND_bytes() failed&quot;</span>);<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(id, <span class="Constant">&quot;</span><span class="Special">%08x</span><span class="Constant">D</span><span class="Special">%08x</span><span class="Constant">D</span><span class="Special">%08x</span><span class="Constant">D</span><span class="Special">%08x</span><span class="Constant">D&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L132" title="src/os/win32/ngx_win32_config.h:132">uint32_t</a></span>) <a href="../os/win32/ngx_win32_config.h.html#L261" title="src/os/win32/ngx_win32_config.h:261">ngx_random</a>(), (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L132" title="src/os/win32/ngx_win32_config.h:132">uint32_t</a></span>) <a href="../os/win32/ngx_win32_config.h.html#L261" title="src/os/win32/ngx_win32_config.h:261">ngx_random</a>(),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L132" title="src/os/win32/ngx_win32_config.h:132">uint32_t</a></span>) <a href="../os/win32/ngx_win32_config.h.html#L261" title="src/os/win32/ngx_win32_config.h:261">ngx_random</a>(), (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L132" title="src/os/win32/ngx_win32_config.h:132">uint32_t</a></span>) <a href="../os/win32/ngx_win32_config.h.html#L261" title="src/os/win32/ngx_win32_config.h:261">ngx_random</a>());<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2103">&#x200c;</a><span class="linkable">ngx_http_variable_connection</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_atomic.h.html#L21" title="src/os/win32/ngx_atomic.h:21">NGX_ATOMIC_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">A&quot;</span>, r-&gt;connection-&gt;number) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2124">&#x200c;</a><span class="linkable">ngx_http_variable_connection_requests</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../core/ngx_config.h.html#L87" title="src/core/ngx_config.h:87">NGX_INT_T_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;</span><span class="Special">%u</span><span class="Constant">i&quot;</span>, r-&gt;connection-&gt;requests) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2145">&#x200c;</a><span class="linkable">ngx_http_variable_nginx_version</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <span class="Statement">sizeof</span>(<a href="../core/nginx.h.html#L13" title="src/core/nginx.h:13">NGINX_VERSION</a>) - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = (u_char *) <a href="../core/nginx.h.html#L13" title="src/core/nginx.h:13">NGINX_VERSION</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2159">&#x200c;</a><span class="linkable">ngx_http_variable_hostname</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;hostname.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = <a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;hostname.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2173">&#x200c;</a><span class="linkable">ngx_http_variable_pid</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../core/ngx_config.h.html#L84" title="src/core/ngx_config.h:84">NGX_INT64_LEN</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;%P&quot;</span>, <a href="../os/win32/ngx_process_cycle.c.html#L33" title="src/os/win32/ngx_process_cycle.c:33">ngx_pid</a>) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2194">&#x200c;</a><span class="linkable">ngx_http_variable_msec</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_times.h.html#L20" title="src/core/ngx_times.h:20">ngx_time_t</a>&nbsp; *tp;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../os/win32/ngx_win32_config.h.html#L202" title="src/os/win32/ngx_win32_config.h:202">NGX_TIME_T_LEN</a> + <span class="Constant">4</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; tp = <a href="../core/ngx_times.h.html#L37" title="src/core/ngx_times.h:37">ngx_timeofday</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_string.c.html#L105" title="src/core/ngx_string.c:105">ngx_sprintf</a>(p, <span class="Constant">&quot;%T.%03M&quot;</span>, tp-&gt;sec, tp-&gt;<a href="../event/modules/ngx_iocp_module.c.html#L103" title="src/event/modules/ngx_iocp_module.c:103">msec</a>) - p;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2218">&#x200c;</a><span class="linkable">ngx_http_variable_time_iso8601</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../core/ngx_times.c.html#L31" title="src/core/ngx_times.c:31">ngx_cached_http_log_iso8601</a>.len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L1966" title="src/core/ngx_string.c:1966">ngx_memcpy</a>(p, <a href="../core/ngx_times.c.html#L31" title="src/core/ngx_times.c:31">ngx_cached_http_log_iso8601</a>.data,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../core/ngx_times.c.html#L31" title="src/core/ngx_times.c:31">ngx_cached_http_log_iso8601</a>.len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_times.c.html#L31" title="src/core/ngx_times.c:31">ngx_cached_http_log_iso8601</a>.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2242">&#x200c;</a><span class="linkable">ngx_http_variable_time_local</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v, <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, <a href="../core/ngx_times.c.html#L30" title="src/core/ngx_times.c:30">ngx_cached_http_log_time</a>.len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.c.html#L1966" title="src/core/ngx_string.c:1966">ngx_memcpy</a>(p, <a href="../core/ngx_times.c.html#L30" title="src/core/ngx_times.c:30">ngx_cached_http_log_time</a>.data, <a href="../core/ngx_times.c.html#L30" title="src/core/ngx_times.c:30">ngx_cached_http_log_time</a>.len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v-&gt;len = <a href="../core/ngx_times.c.html#L30" title="src/core/ngx_times.c:30">ngx_cached_http_log_time</a>.len;<br/></li>
<li>&nbsp; &nbsp; v-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v-&gt;data = p;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">void</span> *<br/></li>
<li><a id="L2265">&#x200c;</a><span class="linkable">ngx_http_map_find</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L97" title="src/http/ngx_http_variables.h:97">ngx_http_map_t</a> *map, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *match)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span>&nbsp; &nbsp; &nbsp; &nbsp; *value;<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; *low;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp;&nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp;&nbsp; key;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = match-&gt;len;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; low = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(r-&gt;pool, len);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (low == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; low = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; key = <a href="../core/ngx_hash.c.html#L641" title="src/core/ngx_hash.c:641">ngx_hash_strlow</a>(low, match-&gt;data, len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; value = <a href="../core/ngx_hash.c.html#L211" title="src/core/ngx_hash.c:211">ngx_hash_find_combined</a>(&amp;map-&gt;hash, key, low, len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (value) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> value;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_PCRE)<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (len &amp;&amp; map-&gt;nregex) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L80" title="src/http/ngx_http_variables.h:80">ngx_http_map_regex_t</a>&nbsp; *reg;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; reg = map-&gt;regex;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; map-&gt;nregex; i++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n = <a href="#L2409" title="src/http/ngx_http_variables.c:2409">ngx_http_regex_exec</a>(r, reg[i].regex, match);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (n == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> reg[i].value;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (n == <a href="../core/ngx_core.h.html#L41" title="src/core/ngx_core.h:41">NGX_DECLINED</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a> */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_PCRE)<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2327">&#x200c;</a><span class="linkable">ngx_http_variable_not_found</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a> *v,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> data)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; v-&gt;not_found = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="ngx_http_variables.h.html#L74" title="src/http/ngx_http_variables.h:74">ngx_http_regex_t</a> *<br/></li>
<li><a id="L2336">&#x200c;</a><span class="linkable">ngx_http_regex_compile</span>(<a href="../core/ngx_core.h.html#L16" title="src/core/ngx_core.h:16">ngx_conf_t</a> *cf, <a href="../core/ngx_regex.h.html#L40" title="src/core/ngx_regex.h:40">ngx_regex_compile_t</a> *rc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; name;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i, n;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *v;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L74" title="src/http/ngx_http_variables.h:74">ngx_http_regex_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *re;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L65" title="src/http/ngx_http_variables.h:65">ngx_http_regex_variable_t</a>&nbsp; *rv;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; rc-&gt;pool = cf-&gt;pool;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_regex.c.html#L95" title="src/core/ngx_regex.c:95">ngx_regex_compile</a>(rc) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf, <span class="Constant">0</span>, <span class="Constant">&quot;%V&quot;</span>, &amp;rc-&gt;err);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; re = <a href="../core/ngx_palloc.c.html#L301" title="src/core/ngx_palloc.c:301">ngx_pcalloc</a>(cf-&gt;pool, <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L74" title="src/http/ngx_http_variables.h:74">ngx_http_regex_t</a>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (re == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; re-&gt;regex = rc-&gt;regex;<br/></li>
<li>&nbsp; &nbsp; re-&gt;ncaptures = rc-&gt;captures;<br/></li>
<li>&nbsp; &nbsp; re-&gt;name = rc-&gt;pattern;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L61" title="src/http/ngx_http_config.h:61">ngx_http_conf_get_module_main_conf</a>(cf, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li>&nbsp; &nbsp; cmcf-&gt;ncaptures = <a href="../core/ngx_core.h.html#L101" title="src/core/ngx_core.h:101">ngx_max</a>(cmcf-&gt;ncaptures, re-&gt;ncaptures);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = (<a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>) rc-&gt;named_captures;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (n == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> re;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; rv = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(rc-&gt;pool, n * <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L65" title="src/http/ngx_http_variables.h:65">ngx_http_regex_variable_t</a>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rv == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; re-&gt;variables = rv;<br/></li>
<li>&nbsp; &nbsp; re-&gt;nvariables = n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; size = rc-&gt;name_size;<br/></li>
<li>&nbsp; &nbsp; p = rc-&gt;names;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; n; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rv[i].capture = <span class="Constant">2</span> * ((p[<span class="Constant">0</span>] &lt;&lt; <span class="Constant">8</span>) + p[<span class="Constant">1</span>]);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; name.data = &amp;p[<span class="Constant">2</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; name.len = <a href="../core/ngx_string.h.html#L61" title="src/core/ngx_string.h:61">ngx_strlen</a>(name.data);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v = <a href="#L370" title="src/http/ngx_http_variables.c:370">ngx_http_add_variable</a>(cf, &amp;name, <a href="ngx_http_variables.h.html#L29" title="src/http/ngx_http_variables.h:29">NGX_HTTP_VAR_CHANGEABLE</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rv[i].index = <a href="#L441" title="src/http/ngx_http_variables.c:441">ngx_http_get_variable_index</a>(cf, &amp;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (rv[i].index == <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v-&gt;get_handler = <a href="#L2327" title="src/http/ngx_http_variables.c:2327">ngx_http_variable_not_found</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p += size;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> re;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2409">&#x200c;</a><span class="linkable">ngx_http_regex_exec</span>(<a href="ngx_http.h.html#L16" title="src/http/ngx_http.h:16">ngx_http_request_t</a> *r, <a href="ngx_http_variables.h.html#L74" title="src/http/ngx_http_variables.h:74">ngx_http_regex_t</a> *re, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *s)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rc, index;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i, n, len;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L17" title="src/http/ngx_http_variables.h:17">ngx_http_variable_value_t</a>&nbsp; *vv;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L55" title="src/http/ngx_http_config.h:55">ngx_http_get_module_main_conf</a>(r, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (re-&gt;ncaptures) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len = cmcf-&gt;ncaptures;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;captures == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r-&gt;captures = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(r-&gt;pool, len * <span class="Statement">sizeof</span>(<span class="Type">int</span>));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (r-&gt;captures == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; rc = <a href="../core/ngx_regex.h.html#L52" title="src/core/ngx_regex.h:52">ngx_regex_exec</a>(re-&gt;regex, s, r-&gt;captures, len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_regex.h.html#L18" title="src/core/ngx_regex.h:18">NGX_REGEX_NO_MATCHED</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L41" title="src/core/ngx_core.h:41">NGX_DECLINED</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (rc &lt; <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.c.html#L216" title="src/core/ngx_log.c:216">ngx_log_error</a>(<a href="../core/ngx_log.h.html#L18" title="src/core/ngx_log.h:18">NGX_LOG_ALERT</a>, r-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_regex.h.html#L55" title="src/core/ngx_regex.h:55">ngx_regex_exec_n</a> <span class="Constant">&quot; failed: </span><span class="Special">%i</span><span class="Constant"> on </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant"> using </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rc, s, &amp;re-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; re-&gt;nvariables; i++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; n = re-&gt;variables[i].capture;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; index = re-&gt;variables[i].index;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; vv = &amp;r-&gt;variables[index];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; vv-&gt;len = r-&gt;captures[n + <span class="Constant">1</span>] - r-&gt;captures[n];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; vv-&gt;valid = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; vv-&gt;no_cacheable = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; vv-&gt;not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; vv-&gt;data = &amp;s-&gt;data[r-&gt;captures[n]];<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_DEBUG)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; *v;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v = cmcf-&gt;variables.elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.h.html#L142" title="src/core/ngx_log.h:142">ngx_log_debug2</a>(<a href="../core/ngx_log.h.html#L30" title="src/core/ngx_log.h:30">NGX_LOG_DEBUG_HTTP</a>, r-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;http regex set $%V to </span><span class="Special">\&quot;</span><span class="Constant">%v</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>, &amp;v[index].name, vv);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; r-&gt;ncaptures = rc * <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; r-&gt;captures_data = s-&gt;data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2479">&#x200c;</a><span class="linkable">ngx_http_variables_add_core_vars</span>(<a href="../core/ngx_core.h.html#L16" title="src/core/ngx_core.h:16">ngx_conf_t</a> *cf)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rc;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *cv, *v;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L61" title="src/http/ngx_http_config.h:61">ngx_http_conf_get_module_main_conf</a>(cf, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf-&gt;variables_keys = <a href="../core/ngx_palloc.c.html#L301" title="src/core/ngx_palloc.c:301">ngx_pcalloc</a>(cf-&gt;temp_pool,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">sizeof</span>(<a href="../core/ngx_hash.h.html#L89" title="src/core/ngx_hash.h:89">ngx_hash_keys_arrays_t</a>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (cmcf-&gt;variables_keys == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf-&gt;variables_keys-&gt;pool = cf-&gt;pool;<br/></li>
<li>&nbsp; &nbsp; cmcf-&gt;variables_keys-&gt;temp_pool = cf-&gt;pool;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_hash.c.html#L659" title="src/core/ngx_hash.c:659">ngx_hash_keys_array_init</a>(cmcf-&gt;variables_keys, <a href="../core/ngx_hash.h.html#L65" title="src/core/ngx_hash.h:65">NGX_HASH_SMALL</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (cv = <a href="#L157" title="src/http/ngx_http_variables.c:157">ngx_http_core_variables</a>; cv-&gt;name.len; cv++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(cf-&gt;pool, <span class="Statement">sizeof</span>(<a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *v = *cv;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rc = <a href="../core/ngx_hash.c.html#L714" title="src/core/ngx_hash.c:714">ngx_hash_add_key</a>(cmcf-&gt;variables_keys, &amp;v-&gt;name, v,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L72" title="src/core/ngx_hash.h:72">NGX_HASH_READONLY_KEY</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (rc == <a href="../core/ngx_core.h.html#L39" title="src/core/ngx_core.h:39">NGX_BUSY</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;conflicting variable name </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>, &amp;v-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L2530">&#x200c;</a><span class="linkable">ngx_http_variables_init_vars</span>(<a href="../core/ngx_core.h.html#L16" title="src/core/ngx_core.h:16">ngx_conf_t</a> *cf)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i, n;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L39" title="src/core/ngx_hash.h:39">ngx_hash_key_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *key;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_hash.h.html#L62" title="src/core/ngx_hash.h:62">ngx_hash_init_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; hash;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_variables.h.html#L21" title="src/http/ngx_http_variables.h:21">ngx_http_variable_t</a>&nbsp; &nbsp; &nbsp; &nbsp; *v, *av;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_http_core_module.h.html#L178" title="src/http/ngx_http_core_module.h:178">ngx_http_core_main_conf_t</a>&nbsp; *cmcf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* set the handlers for the indexed http variables */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; cmcf = <a href="ngx_http_config.h.html#L61" title="src/http/ngx_http_config.h:61">ngx_http_conf_get_module_main_conf</a>(cf, <a href="ngx_http_core_module.c.html#L781" title="src/http/ngx_http_core_module.c:781">ngx_http_core_module</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = cmcf-&gt;variables.elts;<br/></li>
<li>&nbsp; &nbsp; key = cmcf-&gt;variables_keys-&gt;keys.elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; cmcf-&gt;variables.nelts; i++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (n = <span class="Constant">0</span>; n &lt; cmcf-&gt;variables_keys-&gt;keys.nelts; n++) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; av = key[n].value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len == key[n].key.len<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, key[n].key.data, v[i].name.len)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = av-&gt;get_handler;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = av-&gt;data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; av-&gt;flags |= <a href="ngx_http_variables.h.html#L31" title="src/http/ngx_http_variables.h:31">NGX_HTTP_VAR_INDEXED</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].flags = av-&gt;flags;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; av-&gt;index = i;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (av-&gt;get_handler == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> next;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len &gt;= <span class="Constant">5<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, <span class="Constant">&quot;http_&quot;</span>, <span class="Constant">5</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = <a href="#L860" title="src/http/ngx_http_variables.c:860">ngx_http_variable_unknown_header_in</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) &amp;v[i].name;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len &gt;= <span class="Constant">10<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, <span class="Constant">&quot;sent_http_&quot;</span>, <span class="Constant">10</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = <a href="#L870" title="src/http/ngx_http_variables.c:870">ngx_http_variable_unknown_header_out</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) &amp;v[i].name;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len &gt;= <span class="Constant">14<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, <span class="Constant">&quot;upstream_http_&quot;</span>, <span class="Constant">14</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = <a href="ngx_http_upstream.c.html#L5282" title="src/http/ngx_http_upstream.c:5282">ngx_http_upstream_header_variable</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) &amp;v[i].name;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].flags = <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len &gt;= <span class="Constant">7<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, <span class="Constant">&quot;cookie_&quot;</span>, <span class="Constant">7</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = <a href="#L974" title="src/http/ngx_http_variables.c:974">ngx_http_variable_cookie</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) &amp;v[i].name;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len &gt;= <span class="Constant">16<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, <span class="Constant">&quot;upstream_cookie_&quot;</span>, <span class="Constant">16</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = <a href="ngx_http_upstream.c.html#L5297" title="src/http/ngx_http_upstream.c:5297">ngx_http_upstream_cookie_variable</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) &amp;v[i].name;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].flags = <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i].name.len &gt;= <span class="Constant">4<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="../core/ngx_string.h.html#L53" title="src/core/ngx_string.h:53">ngx_strncmp</a>(v[i].name.data, <span class="Constant">&quot;arg_&quot;</span>, <span class="Constant">4</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].get_handler = <a href="#L1002" title="src/http/ngx_http_variables.c:1002">ngx_http_variable_argument</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].data = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) &amp;v[i].name;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i].flags = <a href="ngx_http_variables.h.html#L30" title="src/http/ngx_http_variables.h:30">NGX_HTTP_VAR_NOCACHEABLE</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.c.html#L216" title="src/core/ngx_log.c:216">ngx_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, cf-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;unknown </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant"> variable&quot;</span>, &amp;v[i].name);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li><br/></li>
<li><span class="cUserCont">&nbsp; &nbsp; </span><span class="Statement">next</span><span class="cUserCont">:<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (n = <span class="Constant">0</span>; n &lt; cmcf-&gt;variables_keys-&gt;keys.nelts; n++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; av = key[n].value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (av-&gt;flags &amp; <a href="ngx_http_variables.h.html#L32" title="src/http/ngx_http_variables.h:32">NGX_HTTP_VAR_NOHASH</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key[n].key.data = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; hash.hash = &amp;cmcf-&gt;variables_hash;<br/></li>
<li>&nbsp; &nbsp; hash.key = <a href="../core/ngx_hash.c.html#L611" title="src/core/ngx_hash.c:611">ngx_hash_key</a>;<br/></li>
<li>&nbsp; &nbsp; hash.max_size = cmcf-&gt;variables_hash_max_size;<br/></li>
<li>&nbsp; &nbsp; hash.bucket_size = cmcf-&gt;variables_hash_bucket_size;<br/></li>
<li>&nbsp; &nbsp; hash.name = <span class="Constant">&quot;variables_hash&quot;</span>;<br/></li>
<li>&nbsp; &nbsp; hash.pool = cf-&gt;pool;<br/></li>
<li>&nbsp; &nbsp; hash.temp_pool = <span class="Constant">NULL</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_hash.c.html#L252" title="src/core/ngx_hash.c:252">ngx_hash_init</a>(&amp;hash, cmcf-&gt;variables_keys-&gt;keys.elts,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmcf-&gt;variables_keys-&gt;keys.nelts)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cmcf-&gt;variables_keys = <span class="Constant">NULL</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
