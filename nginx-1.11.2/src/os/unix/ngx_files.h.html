<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>src/os/unix/ngx_files.h - Nginx 1.11.2</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../../index.html">Top Level</a></span>
 </p>

  <h1>src/os/unix/ngx_files.h - Nginx 1.11.2</h1>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L37">ngx_dir_t</a></li>
<li><a href="#L16">ngx_fd_t</a></li>
<li><a href="#L17">ngx_file_info_t</a></li>
<li><a href="#L27">ngx_file_mapping_t</a></li>
<li><a href="#L18">ngx_file_uniq_t</a></li>
<li><a href="#L46">ngx_glob_t</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L250">ngx_de_info</a></li>
<li><a href="#L145">ngx_write_fd</a></li>
</ul>
 <h2>Macros defined</h2>
 <ul class="toc">
<li><a href="#L366">NGX_AT_FDCWD</a></li>
<li><a href="#L216">NGX_DIR_MASK_LEN</a></li>
<li><a href="#L78">NGX_FILE_APPEND</a></li>
<li><a href="#L75">NGX_FILE_CREATE_OR_OPEN</a></li>
<li><a href="#L105">NGX_FILE_DEFAULT_ACCESS</a></li>
<li><a href="#L85">NGX_FILE_DIRECTORY</a></li>
<li><a href="#L87">NGX_FILE_DIRECTORY</a></li>
<li><a href="#L50">NGX_FILE_ERROR</a></li>
<li><a href="#L82">NGX_FILE_NOFOLLOW</a></li>
<li><a href="#L79">NGX_FILE_NONBLOCK</a></li>
<li><a href="#L76">NGX_FILE_OPEN</a></li>
<li><a href="#L106">NGX_FILE_OWNER_ACCESS</a></li>
<li><a href="#L72">NGX_FILE_RDONLY</a></li>
<li><a href="#L74">NGX_FILE_RDWR</a></li>
<li><a href="#L91">NGX_FILE_SEARCH</a></li>
<li><a href="#L94">NGX_FILE_SEARCH</a></li>
<li><a href="#L97">NGX_FILE_SEARCH</a></li>
<li><a href="#L100">NGX_FILE_SEARCH</a></li>
<li><a href="#L77">NGX_FILE_TRUNCATE</a></li>
<li><a href="#L73">NGX_FILE_WRONLY</a></li>
<li><a href="#L57">NGX_HAVE_CASELESS_FILESYSTEM</a></li>
<li><a href="#L206">NGX_HAVE_MAX_PATH</a></li>
<li><a href="#L306">NGX_HAVE_READ_AHEAD</a></li>
<li><a href="#L313">NGX_HAVE_READ_AHEAD</a></li>
<li><a href="#L49">NGX_INVALID_FILE</a></li>
<li><a href="#L158">NGX_LINEFEED</a></li>
<li><a href="#L157">NGX_LINEFEED_SIZE</a></li>
<li><a href="#L207">NGX_MAX_PATH</a></li>
<li><a href="#L211">NGX_MAX_PATH</a></li>
<li><a href="#L9">_NGX_FILES_H_INCLUDED_</a></li>
<li><a href="#L165">ngx_change_file_access</a></li>
<li><a href="#L166">ngx_change_file_access_n</a></li>
<li><a href="#L223">ngx_close_dir</a></li>
<li><a href="#L224">ngx_close_dir_n</a></li>
<li><a href="#L109">ngx_close_file</a></li>
<li><a href="#L110">ngx_close_file_n</a></li>
<li><a href="#L231">ngx_create_dir</a></li>
<li><a href="#L232">ngx_create_dir_n</a></li>
<li><a href="#L282">ngx_de_access</a></li>
<li><a href="#L284">ngx_de_fs_size</a></li>
<li><a href="#L256">ngx_de_info_n</a></li>
<li><a href="#L267">ngx_de_is_dir</a></li>
<li><a href="#L276">ngx_de_is_dir</a></li>
<li><a href="#L269">ngx_de_is_file</a></li>
<li><a href="#L277">ngx_de_is_file</a></li>
<li><a href="#L271">ngx_de_is_link</a></li>
<li><a href="#L278">ngx_de_is_link</a></li>
<li><a href="#L257">ngx_de_link_info</a></li>
<li><a href="#L258">ngx_de_link_info_n</a></li>
<li><a href="#L286">ngx_de_mtime</a></li>
<li><a href="#L242">ngx_de_name</a></li>
<li><a href="#L244">ngx_de_namelen</a></li>
<li><a href="#L246">ngx_de_namelen</a></li>
<li><a href="#L283">ngx_de_size</a></li>
<li><a href="#L235">ngx_delete_dir</a></li>
<li><a href="#L236">ngx_delete_dir_n</a></li>
<li><a href="#L113">ngx_delete_file</a></li>
<li><a href="#L114">ngx_delete_file_n</a></li>
<li><a href="#L239">ngx_dir_access</a></li>
<li><a href="#L332">ngx_directio_off_n</a></li>
<li><a href="#L336">ngx_directio_on</a></li>
<li><a href="#L341">ngx_directio_on</a></li>
<li><a href="#L346">ngx_directio_on</a></li>
<li><a href="#L329">ngx_directio_on_n</a></li>
<li><a href="#L337">ngx_directio_on_n</a></li>
<li><a href="#L342">ngx_directio_on_n</a></li>
<li><a href="#L347">ngx_directio_on_n</a></li>
<li><a href="#L176">ngx_fd_info</a></li>
<li><a href="#L177">ngx_fd_info_n</a></li>
<li><a href="#L186">ngx_file_access</a></li>
<li><a href="#L361">ngx_file_at_info</a></li>
<li><a href="#L364">ngx_file_at_info_n</a></li>
<li><a href="#L188">ngx_file_fs_size</a></li>
<li><a href="#L173">ngx_file_info</a></li>
<li><a href="#L174">ngx_file_info_n</a></li>
<li><a href="#L189">ngx_file_mtime</a></li>
<li><a href="#L187">ngx_file_size</a></li>
<li><a href="#L190">ngx_file_uniq</a></li>
<li><a href="#L199">ngx_getcwd</a></li>
<li><a href="#L200">ngx_getcwd_n</a></li>
<li><a href="#L182">ngx_is_dir</a></li>
<li><a href="#L185">ngx_is_exec</a></li>
<li><a href="#L183">ngx_is_file</a></li>
<li><a href="#L184">ngx_is_link</a></li>
<li><a href="#L156">ngx_linefeed</a></li>
<li><a href="#L179">ngx_link_info</a></li>
<li><a href="#L180">ngx_link_info_n</a></li>
<li><a href="#L300">ngx_lock_fd_n</a></li>
<li><a href="#L220">ngx_open_dir_n</a></li>
<li><a href="#L60">ngx_open_file</a></li>
<li><a href="#L65">ngx_open_file</a></li>
<li><a href="#L70">ngx_open_file_n</a></li>
<li><a href="#L290">ngx_open_glob_n</a></li>
<li><a href="#L119">ngx_open_tempfile_n</a></li>
<li><a href="#L356">ngx_openat_file</a></li>
<li><a href="#L359">ngx_openat_file_n</a></li>
<li><a href="#L201">ngx_path_separator</a></li>
<li><a href="#L308">ngx_read_ahead</a></li>
<li><a href="#L320">ngx_read_ahead</a></li>
<li><a href="#L309">ngx_read_ahead_n</a></li>
<li><a href="#L316">ngx_read_ahead_n</a></li>
<li><a href="#L321">ngx_read_ahead_n</a></li>
<li><a href="#L228">ngx_read_dir_n</a></li>
<li><a href="#L136">ngx_read_fd</a></li>
<li><a href="#L137">ngx_read_fd_n</a></li>
<li><a href="#L124">ngx_read_file_n</a></li>
<li><a href="#L126">ngx_read_file_n</a></li>
<li><a href="#L197">ngx_realpath</a></li>
<li><a href="#L198">ngx_realpath_n</a></li>
<li><a href="#L161">ngx_rename_file</a></li>
<li><a href="#L162">ngx_rename_file_n</a></li>
<li><a href="#L170">ngx_set_file_time_n</a></li>
<li><a href="#L373">ngx_set_stderr</a></li>
<li><a href="#L374">ngx_set_stderr_n</a></li>
<li><a href="#L372">ngx_stderr</a></li>
<li><a href="#L371">ngx_stdout</a></li>
<li><a href="#L299">ngx_trylock_fd_n</a></li>
<li><a href="#L301">ngx_unlock_fd_n</a></li>
<li><a href="#L153">ngx_write_console</a></li>
<li><a href="#L150">ngx_write_fd_n</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Copyright (C) Igor Sysoev<br/></li>
<li></span><span class="Comment"> * Copyright (C) Nginx, Inc.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#ifndef <a href="../win32/ngx_files.h.html#L9" title="src/os/win32/ngx_files.h:9">_NGX_FILES_H_INCLUDED_</a><br/></li>
<li><a id="L9">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">_NGX_FILES_H_INCLUDED_</span><br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;ngx_config.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;ngx_core.h&gt;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L16">&#x200c;</a><span class="Type">typedef</span> <span class="Type">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="linkable">ngx_fd_t</span>;<br/></li>
<li><a id="L17">&#x200c;</a><span class="Type">typedef</span> <span class="Type">struct</span> stat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="linkable">ngx_file_info_t</span>;<br/></li>
<li><a id="L18">&#x200c;</a><span class="Type">typedef</span> <a href="../win32/ngx_win32_config.h.html#L174" title="src/os/win32/ngx_win32_config.h:174">ino_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="linkable">ngx_file_uniq_t</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">typedef</span> <span class="Type">struct</span> {<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *name;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; size;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *addr;<br/></li>
<li>&nbsp; &nbsp; <a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fd;<br/></li>
<li>&nbsp; &nbsp; <a href="../../core/ngx_core.h.html#L20" title="src/core/ngx_core.h:20">ngx_log_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *log;<br/></li>
<li><a id="L27">&#x200c;</a>} <span class="linkable">ngx_file_mapping_t</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">typedef</span> <span class="Type">struct</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">DIR</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *dir;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">struct</span> dirent&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *de;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">struct</span> stat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; info;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; type:<span class="Constant">8</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; valid_info:<span class="Constant">1</span>;<br/></li>
<li><a id="L37">&#x200c;</a>} <span class="linkable">ngx_dir_t</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">typedef</span> <span class="Type">struct</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; n;<br/></li>
<li>&nbsp; &nbsp; glob_t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pglob;<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *pattern;<br/></li>
<li>&nbsp; &nbsp; <a href="../../core/ngx_core.h.html#L20" title="src/core/ngx_core.h:20">ngx_log_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *log;<br/></li>
<li>&nbsp; &nbsp; <a href="../../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; test;<br/></li>
<li><a id="L46">&#x200c;</a>} <span class="linkable">ngx_glob_t</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L49">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_INVALID_FILE</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -</span><span class="Constant">1<br/></li>
<li><a id="L50">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_ERROR</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -</span><span class="Constant">1<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="PreProc">#ifdef __CYGWIN__<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifndef <a href="../win32/ngx_win32_config.h.html#L238" title="src/os/win32/ngx_win32_config.h:238">NGX_HAVE_CASELESS_FILESYSTEM</a><br/></li>
<li><a id="L57">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_HAVE_CASELESS_FILESYSTEM</span>&nbsp; </span><span class="Constant">1<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L60">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_open_file</span>(name, mode, create, access)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; open((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name, mode|create|O_BINARY, access)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><br/></li>
<li><a id="L65">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_open_file</span>(name, mode, create, access)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; open((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name, mode|create, access)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L70">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_open_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;open()&quot;<br/></li>
<li></span><br/></li>
<li><a id="L72">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_FILE_RDONLY</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; O_RDONLY<br/></li>
<li><a id="L73">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_WRONLY</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; O_WRONLY<br/></li>
<li><a id="L74">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_RDWR</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; O_RDWR<br/></li>
<li><a id="L75">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_CREATE_OR_OPEN</span>&nbsp; O_CREAT<br/></li>
<li><a id="L76">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_OPEN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">0<br/></li>
<li><a id="L77">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_TRUNCATE</span>&nbsp; &nbsp; &nbsp; &nbsp; (O_CREAT|O_TRUNC)<br/></li>
<li><a id="L78">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_APPEND</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (O_WRONLY|O_APPEND)<br/></li>
<li><a id="L79">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_NONBLOCK</span>&nbsp; &nbsp; &nbsp; &nbsp; O_NONBLOCK<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_OPENAT)<br/></li>
<li><a id="L82">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_NOFOLLOW</span>&nbsp; &nbsp; &nbsp; &nbsp; O_NOFOLLOW<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if defined(O_DIRECTORY)<br/></li>
<li><a id="L85">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_DIRECTORY</span>&nbsp; &nbsp; &nbsp;&nbsp; O_DIRECTORY<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L87">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_DIRECTORY</span>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">0<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if defined(O_SEARCH)<br/></li>
<li><a id="L91">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_SEARCH</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (O_SEARCH|<a href="#L85" title="src/os/unix/ngx_files.h:85">NGX_FILE_DIRECTORY</a>)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#elif defined(O_EXEC)<br/></li>
<li><a id="L94">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_SEARCH</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (O_EXEC|<a href="#L85" title="src/os/unix/ngx_files.h:85">NGX_FILE_DIRECTORY</a>)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#elif (NGX_HAVE_O_PATH)<br/></li>
<li><a id="L97">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_SEARCH</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (O_PATH|O_RDONLY|<a href="#L85" title="src/os/unix/ngx_files.h:85">NGX_FILE_DIRECTORY</a>)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li><a id="L100">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_SEARCH</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (O_RDONLY|<a href="#L85" title="src/os/unix/ngx_files.h:85">NGX_FILE_DIRECTORY</a>)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* NGX_HAVE_OPENAT */<br/></li>
<li></span><br/></li>
<li><a id="L105">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_FILE_DEFAULT_ACCESS</span>&nbsp; 0</span><span class="Constant">644<br/></li>
<li><a id="L106">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_FILE_OWNER_ACCESS</span>&nbsp; &nbsp; 0</span><span class="Constant">600<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L109">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_close_file</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; close<br/></li>
<li><a id="L110">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_close_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;close()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L113">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_delete_file</span>(name)&nbsp; &nbsp; unlink((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name)<br/></li>
<li><a id="L114">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_delete_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;unlink()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> <a href="../win32/ngx_files.h.html#L89" title="src/os/win32/ngx_files.h:89">ngx_open_tempfile</a>(u_char *name, <a href="../../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> persistent,<br/></li>
<li>&nbsp; &nbsp; <a href="../../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> access);<br/></li>
<li><a id="L119">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_open_tempfile_n</span>&nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;open()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> <a href="../win32/ngx_files.c.html#L62" title="src/os/win32/ngx_files.c:62">ngx_read_file</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, u_char *buf, <span class="Type">size_t</span> size, <span class="Type"><a href="../win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span> offset);<br/></li>
<li><span class="PreProc">#if (NGX_HAVE_PREAD)<br/></li>
<li><a id="L124">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_read_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;pread()&quot;<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L126">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_read_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;read()&quot;<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> <a href="../win32/ngx_files.c.html#L95" title="src/os/win32/ngx_files.c:95">ngx_write_file</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, u_char *buf, <span class="Type">size_t</span> size,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span> offset);<br/></li>
<li><br/></li>
<li><span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> <a href="../win32/ngx_files.c.html#L128" title="src/os/win32/ngx_files.c:128">ngx_write_chain_to_file</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, <a href="../../core/ngx_core.h.html#L19" title="src/core/ngx_core.h:19">ngx_chain_t</a> *ce,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span> offset, <a href="../../core/ngx_core.h.html#L18" title="src/core/ngx_core.h:18">ngx_pool_t</a> *pool);<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L136">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_read_fd</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read<br/></li>
<li><a id="L137">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_read_fd_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;read()&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * we use inlined function instead of simple #define<br/></li>
<li></span><span class="Comment"> * because glibc 2.3 sets warn_unused_result attribute for write()<br/></li>
<li></span><span class="Comment"> * and in this case gcc 4.3 ignores (void) cast<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span> <a href="../win32/ngx_win32_config.h.html#L127" title="src/os/win32/ngx_win32_config.h:127">ngx_inline</a> <span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a><br/></li>
<li><a id="L145">&#x200c;</a></span><span class="linkable">ngx_write_fd</span>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd, <span class="Type">void</span> *buf, <span class="Type">size_t</span> n)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> write(fd, buf, n);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L150">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_write_fd_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;write()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L153">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_write_console</span>&nbsp; &nbsp; &nbsp; &nbsp; <a href="../win32/ngx_files.c.html#L178" title="src/os/win32/ngx_files.c:178">ngx_write_fd</a><br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L156">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_linefeed</span>(p)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *p++ = <a href="../../core/ngx_core.h.html#L95" title="src/core/ngx_core.h:95">LF</a>;<br/></li>
<li><a id="L157">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_LINEFEED_SIZE</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">1<br/></li>
<li><a id="L158">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_LINEFEED</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;</span><span class="Special">\x0a</span><span class="Constant">&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L161">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_rename_file</span>(o, n)&nbsp; &nbsp; rename((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) o, (</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) n)<br/></li>
<li><a id="L162">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_rename_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;rename()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L165">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_change_file_access</span>(n, a) chmod((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) n, a)<br/></li>
<li><a id="L166">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_change_file_access_n</span> </span><span class="Constant">&quot;chmod()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L306" title="src/os/win32/ngx_files.c:306">ngx_set_file_time</a>(u_char *name, <a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd, <span class="Type"><a href="../win32/ngx_win32_config.h.html#L68" title="src/os/win32/ngx_win32_config.h:68">time_t</a></span> s);<br/></li>
<li><a id="L170">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_set_file_time_n</span>&nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;utimes()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L173">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_file_info</span>(file, sb)&nbsp; stat((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) file, sb)<br/></li>
<li><a id="L174">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_file_info_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;stat()&quot;<br/></li>
<li></span><br/></li>
<li><a id="L176">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_fd_info</span>(fd, sb)&nbsp; &nbsp; &nbsp; fstat(fd, sb)<br/></li>
<li><a id="L177">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_fd_info_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;fstat()&quot;<br/></li>
<li></span><br/></li>
<li><a id="L179">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_link_info</span>(file, sb)&nbsp; lstat((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) file, sb)<br/></li>
<li><a id="L180">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_link_info_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;lstat()&quot;<br/></li>
<li></span><br/></li>
<li><a id="L182">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_is_dir</span>(sb)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (S_ISDIR((sb)-&gt;st_mode))<br/></li>
<li><a id="L183">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_is_file</span>(sb)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (S_ISREG((sb)-&gt;st_mode))<br/></li>
<li><a id="L184">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_is_link</span>(sb)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (S_ISLNK((sb)-&gt;st_mode))<br/></li>
<li><a id="L185">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_is_exec</span>(sb)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (((sb)-&gt;st_mode &amp; S_IXUSR) == S_IXUSR)<br/></li>
<li><a id="L186">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_file_access</span>(sb)&nbsp; &nbsp; &nbsp; ((sb)-&gt;st_mode &amp; 0</span><span class="Constant">777</span><span class="PreProc">)<br/></li>
<li><a id="L187">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_file_size</span>(sb)&nbsp; &nbsp; &nbsp; &nbsp; (sb)-&gt;st_size<br/></li>
<li><a id="L188">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_file_fs_size</span>(sb)&nbsp; &nbsp;&nbsp; <a href="../../core/ngx_core.h.html#L101" title="src/core/ngx_core.h:101">ngx_max</a>((sb)-&gt;st_size, (sb)-&gt;st_blocks * </span><span class="Constant">512</span><span class="PreProc">)<br/></li>
<li><a id="L189">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_file_mtime</span>(sb)&nbsp; &nbsp; &nbsp;&nbsp; (sb)-&gt;st_mtime<br/></li>
<li><a id="L190">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_file_uniq</span>(sb)&nbsp; &nbsp; &nbsp; &nbsp; (sb)-&gt;st_ino<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L327" title="src/os/win32/ngx_files.c:327">ngx_create_file_mapping</a>(<a href="../win32/ngx_files.h.html#L28" title="src/os/win32/ngx_files.h:28">ngx_file_mapping_t</a> *fm);<br/></li>
<li><span class="Type">void</span> <a href="../win32/ngx_files.c.html#L397" title="src/os/win32/ngx_files.c:397">ngx_close_file_mapping</a>(<a href="../win32/ngx_files.h.html#L28" title="src/os/win32/ngx_files.h:28">ngx_file_mapping_t</a> *fm);<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L197">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_realpath</span>(p, r)&nbsp; &nbsp; &nbsp;&nbsp; (u_char *) realpath((</span><span class="Type">char</span><span class="PreProc"> *) p, (</span><span class="Type">char</span><span class="PreProc"> *) r)<br/></li>
<li><a id="L198">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_realpath_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;realpath()&quot;<br/></li>
<li><a id="L199">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_getcwd</span>(buf, size)&nbsp; &nbsp; (getcwd((</span><span class="Type">char</span><span class="PreProc"> *) buf, size) != </span><span class="Constant">NULL</span><span class="PreProc">)<br/></li>
<li><a id="L200">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_getcwd_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;getcwd()&quot;<br/></li>
<li><a id="L201">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_path_separator</span>(c)&nbsp; &nbsp; ((c) == </span><span class="Constant">'/'</span><span class="PreProc">)<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#if defined(PATH_MAX)<br/></li>
<li></span><br/></li>
<li><a id="L206">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_HAVE_MAX_PATH</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">1<br/></li>
<li><a id="L207">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">NGX_MAX_PATH</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; PATH_MAX<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><br/></li>
<li><a id="L211">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_MAX_PATH</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">4096<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L216">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_DIR_MASK_LEN</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">0<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L427" title="src/os/win32/ngx_files.c:427">ngx_open_dir</a>(<a href="../../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name, <a href="../win32/ngx_files.h.html#L38" title="src/os/win32/ngx_files.h:38">ngx_dir_t</a> *dir);<br/></li>
<li><a id="L220">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_open_dir_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;opendir()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L223">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_close_dir</span>(d)&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; closedir((d)-&gt;dir)<br/></li>
<li><a id="L224">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_close_dir_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;closedir()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L447" title="src/os/win32/ngx_files.c:447">ngx_read_dir</a>(<a href="../win32/ngx_files.h.html#L38" title="src/os/win32/ngx_files.h:38">ngx_dir_t</a> *dir);<br/></li>
<li><a id="L228">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_read_dir_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;readdir()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L231">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_create_dir</span>(name, access) mkdir((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name, access)<br/></li>
<li><a id="L232">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_create_dir_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;mkdir()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L235">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_delete_dir</span>(name)&nbsp; &nbsp;&nbsp; rmdir((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name)<br/></li>
<li><a id="L236">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_delete_dir_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;rmdir()&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L239">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_dir_access</span>(a)&nbsp; &nbsp; &nbsp; &nbsp; (a | (a &amp; 0</span><span class="Constant">444</span><span class="PreProc">) &gt;&gt; </span><span class="Constant">2</span><span class="PreProc">)<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L242">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_de_name</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((u_char *) (dir)-&gt;de-&gt;d_name)<br/></li>
<li></span><span class="PreProc">#if (NGX_HAVE_D_NAMLEN)<br/></li>
<li><a id="L244">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_namelen</span>(dir)&nbsp; &nbsp; &nbsp; (dir)-&gt;de-&gt;d_namlen<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L246">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_namelen</span>(dir)&nbsp; &nbsp; &nbsp; <a href="../../core/ngx_string.h.html#L61" title="src/core/ngx_string.h:61">ngx_strlen</a>((dir)-&gt;de-&gt;d_name)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span> <a href="../win32/ngx_win32_config.h.html#L127" title="src/os/win32/ngx_win32_config.h:127">ngx_inline</a> <a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L250">&#x200c;</a><span class="linkable">ngx_de_info</span>(u_char *name, <a href="../win32/ngx_files.h.html#L38" title="src/os/win32/ngx_files.h:38">ngx_dir_t</a> *dir)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; dir-&gt;type = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> stat((<span class="Type">const</span> <span class="Type">char</span> *) name, &amp;dir-&gt;info);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L256">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_de_info_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;stat()&quot;<br/></li>
<li><a id="L257">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_link_info</span>(name, dir)&nbsp; lstat((</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name, &amp;(dir)-&gt;info)<br/></li>
<li><a id="L258">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_link_info_n</span>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;lstat()&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_D_TYPE)<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * some file systems (e.g. XFS on Linux and CD9660 on FreeBSD)<br/></li>
<li></span><span class="Comment"> * do not set dirent.d_type<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><a id="L267">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_de_is_dir</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; (((dir)-&gt;type) ? ((dir)-&gt;type == DT_DIR) : (S_ISDIR((dir)-&gt;info.st_mode)))<br/></li>
<li><a id="L269">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_is_file</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; (((dir)-&gt;type) ? ((dir)-&gt;type == DT_REG) : (S_ISREG((dir)-&gt;info.st_mode)))<br/></li>
<li><a id="L271">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_is_link</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; (((dir)-&gt;type) ? ((dir)-&gt;type == DT_LNK) : (S_ISLNK((dir)-&gt;info.st_mode)))<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><br/></li>
<li><a id="L276">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_de_is_dir</span>(dir)&nbsp; &nbsp; &nbsp;&nbsp; (S_ISDIR((dir)-&gt;info.st_mode))<br/></li>
<li><a id="L277">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_is_file</span>(dir)&nbsp; &nbsp; &nbsp; (S_ISREG((dir)-&gt;info.st_mode))<br/></li>
<li><a id="L278">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_is_link</span>(dir)&nbsp; &nbsp; &nbsp; (S_ISLNK((dir)-&gt;info.st_mode))<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L282">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_de_access</span>(dir)&nbsp; &nbsp; &nbsp;&nbsp; (((dir)-&gt;info.st_mode) &amp; 0</span><span class="Constant">777</span><span class="PreProc">)<br/></li>
<li><a id="L283">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_size</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (dir)-&gt;info.st_size<br/></li>
<li><a id="L284">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_fs_size</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; <a href="../../core/ngx_core.h.html#L101" title="src/core/ngx_core.h:101">ngx_max</a>((dir)-&gt;info.st_size, (dir)-&gt;info.st_blocks * </span><span class="Constant">512</span><span class="PreProc">)<br/></li>
<li><a id="L286">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_de_mtime</span>(dir)&nbsp; &nbsp; &nbsp; &nbsp; (dir)-&gt;info.st_mtime<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L475" title="src/os/win32/ngx_files.c:475">ngx_open_glob</a>(<a href="../win32/ngx_files.h.html#L53" title="src/os/win32/ngx_files.h:53">ngx_glob_t</a> *gl);<br/></li>
<li><a id="L290">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_open_glob_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;glob()&quot;<br/></li>
<li></span><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L522" title="src/os/win32/ngx_files.c:522">ngx_read_glob</a>(<a href="../win32/ngx_files.h.html#L53" title="src/os/win32/ngx_files.h:53">ngx_glob_t</a> *gl, <a href="../../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name);<br/></li>
<li><span class="Type">void</span> <a href="../win32/ngx_files.c.html#L574" title="src/os/win32/ngx_files.c:574">ngx_close_glob</a>(<a href="../win32/ngx_files.h.html#L53" title="src/os/win32/ngx_files.h:53">ngx_glob_t</a> *gl);<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../win32/ngx_errno.h.html#L16" title="src/os/win32/ngx_errno.h:16">ngx_err_t</a> <a href="ngx_files.c.html#L758" title="src/os/unix/ngx_files.c:758">ngx_trylock_fd</a>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd);<br/></li>
<li><a href="../win32/ngx_errno.h.html#L16" title="src/os/win32/ngx_errno.h:16">ngx_err_t</a> <a href="ngx_files.c.html#L775" title="src/os/unix/ngx_files.c:775">ngx_lock_fd</a>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd);<br/></li>
<li><a href="../win32/ngx_errno.h.html#L16" title="src/os/win32/ngx_errno.h:16">ngx_err_t</a> <a href="ngx_files.c.html#L792" title="src/os/unix/ngx_files.c:792">ngx_unlock_fd</a>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd);<br/></li>
<li><br/></li>
<li><a id="L299">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_trylock_fd_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;fcntl(F_SETLK, F_WRLCK)&quot;<br/></li>
<li><a id="L300">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_lock_fd_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;fcntl(F_SETLKW, F_WRLCK)&quot;<br/></li>
<li><a id="L301">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_unlock_fd_n</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;fcntl(F_SETLK, F_UNLCK)&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_F_READAHEAD)<br/></li>
<li></span><br/></li>
<li><a id="L306">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_HAVE_READ_AHEAD</span>&nbsp; &nbsp; &nbsp; </span><span class="Constant">1<br/></li>
<li></span><br/></li>
<li><a id="L308">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_read_ahead</span>(fd, n)&nbsp; &nbsp; fcntl(fd, F_READAHEAD, (</span><span class="Type">int</span><span class="PreProc">) n)<br/></li>
<li><a id="L309">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_read_ahead_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;fcntl(fd, F_READAHEAD)&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#elif (NGX_HAVE_POSIX_FADVISE)<br/></li>
<li></span><br/></li>
<li><a id="L313">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_HAVE_READ_AHEAD</span>&nbsp; &nbsp; &nbsp; </span><span class="Constant">1<br/></li>
<li></span><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L606" title="src/os/win32/ngx_files.c:606">ngx_read_ahead</a>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd, <span class="Type">size_t</span> n);<br/></li>
<li><a id="L316">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_read_ahead_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;posix_fadvise(POSIX_FADV_SEQUENTIAL)&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><br/></li>
<li><a id="L320">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_read_ahead</span>(fd, n)&nbsp; &nbsp; </span><span class="Constant">0<br/></li>
<li><a id="L321">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_read_ahead_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;<span class="linkable">ngx_read_ahead_n</span>&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_O_DIRECT)<br/></li>
<li></span><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L613" title="src/os/win32/ngx_files.c:613">ngx_directio_on</a>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd);<br/></li>
<li><a id="L329">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_directio_on_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;fcntl(O_DIRECT)&quot;<br/></li>
<li></span><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="../win32/ngx_files.c.html#L620" title="src/os/win32/ngx_files.c:620">ngx_directio_off</a>(<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a> fd);<br/></li>
<li><a id="L332">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_directio_off_n</span>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;fcntl(!O_DIRECT)&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#elif (NGX_HAVE_F_NOCACHE)<br/></li>
<li></span><br/></li>
<li><a id="L336">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_directio_on</span>(fd)&nbsp; &nbsp; &nbsp; fcntl(fd, F_NOCACHE, </span><span class="Constant">1</span><span class="PreProc">)<br/></li>
<li><a id="L337">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_directio_on_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;fcntl(F_NOCACHE, 1)&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#elif (NGX_HAVE_DIRECTIO)<br/></li>
<li></span><br/></li>
<li><a id="L341">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_directio_on</span>(fd)&nbsp; &nbsp; &nbsp; directio(fd, DIRECTIO_ON)<br/></li>
<li><a id="L342">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_directio_on_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;directio(DIRECTIO_ON)&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><br/></li>
<li><a id="L346">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_directio_on</span>(fd)&nbsp; &nbsp; &nbsp; </span><span class="Constant">0<br/></li>
<li><a id="L347">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_directio_on_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;<span class="linkable">ngx_directio_on_n</span>&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Type">size_t</span> <a href="../win32/ngx_files.c.html#L627" title="src/os/win32/ngx_files.c:627">ngx_fs_bsize</a>(u_char *name);<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_OPENAT)<br/></li>
<li></span><br/></li>
<li><a id="L356">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_openat_file</span>(fd, name, mode, create, access)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; openat(fd, (</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name, mode|create, access)<br/></li>
<li></span><br/></li>
<li><a id="L359">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_openat_file_n</span>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;openat()&quot;<br/></li>
<li></span><br/></li>
<li><a id="L361">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_file_at_info</span>(fd, name, sb, flag)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; fstatat(fd, (</span><span class="Type">const</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc"> *) name, sb, flag)<br/></li>
<li></span><br/></li>
<li><a id="L364">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_file_at_info_n</span>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;fstatat()&quot;<br/></li>
<li></span><br/></li>
<li><a id="L366">&#x200c;</a><span class="PreProc">#define <span class="linkable">NGX_AT_FDCWD</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<a href="../win32/ngx_files.h.html#L16" title="src/os/win32/ngx_files.h:16">ngx_fd_t</a>) AT_FDCWD<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L371">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_stdout</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; STDOUT_FILENO<br/></li>
<li><a id="L372">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_stderr</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; STDERR_FILENO<br/></li>
<li><a id="L373">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_set_stderr</span>(fd)&nbsp; &nbsp; &nbsp;&nbsp; dup2(fd, STDERR_FILENO)<br/></li>
<li><a id="L374">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">ngx_set_stderr_n</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;dup2(STDERR_FILENO)&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_HAVE_FILE_AIO)<br/></li>
<li></span><br/></li>
<li><a href="../../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="ngx_linux_aio_read.c.html#L28" title="src/os/unix/ngx_linux_aio_read.c:28">ngx_file_aio_init</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, <a href="../../core/ngx_core.h.html#L18" title="src/core/ngx_core.h:18">ngx_pool_t</a> *pool);<br/></li>
<li><span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> <a href="ngx_linux_aio_read.c.html#L50" title="src/os/unix/ngx_linux_aio_read.c:50">ngx_file_aio_read</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, u_char *buf, <span class="Type">size_t</span> size,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span> offset, <a href="../../core/ngx_core.h.html#L18" title="src/core/ngx_core.h:18">ngx_pool_t</a> *pool);<br/></li>
<li><br/></li>
<li><span class="Type">extern</span> <a href="../../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; <a href="ngx_files.c.html#L25" title="src/os/unix/ngx_files.c:25">ngx_file_aio</a>;<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if (NGX_THREADS)<br/></li>
<li></span><span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> <a href="ngx_files.c.html#L95" title="src/os/unix/ngx_files.c:95">ngx_thread_read</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, u_char *buf, <span class="Type">size_t</span> size,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span> offset, <a href="../../core/ngx_core.h.html#L18" title="src/core/ngx_core.h:18">ngx_pool_t</a> *pool);<br/></li>
<li><span class="Type"><a href="../win32/ngx_win32_config.h.html#L188" title="src/os/win32/ngx_win32_config.h:188">ssize_t</a></span> <a href="ngx_files.c.html#L477" title="src/os/unix/ngx_files.c:477">ngx_thread_write_chain_to_file</a>(<a href="../../core/ngx_core.h.html#L23" title="src/core/ngx_core.h:23">ngx_file_t</a> *file, <a href="../../core/ngx_core.h.html#L19" title="src/core/ngx_core.h:19">ngx_chain_t</a> *cl,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../win32/ngx_win32_config.h.html#L163" title="src/os/win32/ngx_win32_config.h:163">off_t</a></span> offset, <a href="../../core/ngx_core.h.html#L18" title="src/core/ngx_core.h:18">ngx_pool_t</a> *pool);<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* <a href="../win32/ngx_files.h.html#L9" title="src/os/win32/ngx_files.h:9">_NGX_FILES_H_INCLUDED_</a> */<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
