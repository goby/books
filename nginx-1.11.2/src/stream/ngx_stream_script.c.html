<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>src/stream/ngx_stream_script.c - Nginx 1.11.2</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

  <h1>src/stream/ngx_stream_script.c - Nginx 1.11.2</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L33">ngx_stream_script_exit_code</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L109">ngx_stream_compile_complex_value</a></li>
<li><a href="#L59">ngx_stream_complex_value</a></li>
<li><a href="#L689">ngx_stream_script_add_capture_code</a></li>
<li><a href="#L480">ngx_stream_script_add_code</a></li>
<li><a href="#L504">ngx_stream_script_add_copy_code</a></li>
<li><a href="#L782">ngx_stream_script_add_full_name_code</a></li>
<li><a href="#L584">ngx_stream_script_add_var_code</a></li>
<li><a href="#L265">ngx_stream_script_compile</a></li>
<li><a href="#L750">ngx_stream_script_copy_capture_code</a></li>
<li><a href="#L725">ngx_stream_script_copy_capture_len_code</a></li>
<li><a href="#L561">ngx_stream_script_copy_code</a></li>
<li><a href="#L548">ngx_stream_script_copy_len_code</a></li>
<li><a href="#L655">ngx_stream_script_copy_var_code</a></li>
<li><a href="#L630">ngx_stream_script_copy_var_len_code</a></li>
<li><a href="#L434">ngx_stream_script_done</a></li>
<li><a href="#L37">ngx_stream_script_flush_complex_value</a></li>
<li><a href="#L825">ngx_stream_script_full_name_code</a></li>
<li><a href="#L811">ngx_stream_script_full_name_len_code</a></li>
<li><a href="#L390">ngx_stream_script_init_arrays</a></li>
<li><a href="#L250">ngx_stream_script_variables_count</a></li>
<li><a href="#L213">ngx_stream_set_complex_value_slot</a></li>
</ul>
 <h2>Macros defined</h2>
 <ul class="toc">
<li><a href="#L31">ngx_stream_script_exit</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Copyright (C) Igor Sysoev<br/></li>
<li></span><span class="Comment"> * Copyright (C) Nginx, Inc.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;ngx_config.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;ngx_core.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;ngx_stream.h&gt;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L390" title="src/stream/ngx_stream_script.c:390">ngx_stream_script_init_arrays</a>(<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L434" title="src/stream/ngx_stream_script.c:434">ngx_stream_script_done</a>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L504" title="src/stream/ngx_stream_script.c:504">ngx_stream_script_add_copy_code</a>(<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *value, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> last);<br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L584" title="src/stream/ngx_stream_script.c:584">ngx_stream_script_add_var_code</a>(<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name);<br/></li>
<li><span class="PreProc">#if (NGX_PCRE)<br/></li>
<li></span><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L689" title="src/stream/ngx_stream_script.c:689">ngx_stream_script_add_capture_code</a>(<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> n);<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a> <a href="#L782" title="src/stream/ngx_stream_script.c:782">ngx_stream_script_add_full_name_code</a>(<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc);<br/></li>
<li><span class="Type">static</span> <span class="Type">size_t</span> <a href="#L811" title="src/stream/ngx_stream_script.c:811">ngx_stream_script_full_name_len_code</a>(<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e);<br/></li>
<li><span class="Type">static</span> <span class="Type">void</span> <a href="#L825" title="src/stream/ngx_stream_script.c:825">ngx_stream_script_full_name_code</a>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e);<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L31">&#x200c;</a><span class="PreProc">#define <span class="linkable">ngx_stream_script_exit</span>&nbsp; (u_char *) &amp;<a href="#L33" title="src/stream/ngx_stream_script.c:33">ngx_stream_script_exit_code</a><br/></li>
<li></span><br/></li>
<li><a id="L33">&#x200c;</a><span class="Type">static</span> <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> <span class="linkable">ngx_stream_script_exit_code</span> = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) <span class="Constant">NULL</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">void<br/></li>
<li><a id="L37">&#x200c;</a></span><span class="linkable">ngx_stream_script_flush_complex_value</span>(<a href="ngx_stream.h.html#L20" title="src/stream/ngx_stream.h:20">ngx_stream_session_t</a> *s,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L59" title="src/stream/ngx_stream_script.h:59">ngx_stream_complex_value_t</a> *val)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> *index;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; index = val-&gt;flushes;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (index) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (*index != (<a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>) -<span class="Constant">1</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (s-&gt;variables[*index].no_cacheable) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s-&gt;variables[*index].valid = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s-&gt;variables[*index].not_found = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L59">&#x200c;</a><span class="linkable">ngx_stream_complex_value</span>(<a href="ngx_stream.h.html#L20" title="src/stream/ngx_stream.h:20">ngx_stream_session_t</a> *s,<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L59" title="src/stream/ngx_stream_script.h:59">ngx_stream_complex_value_t</a> *val, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *value)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; len;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L73" title="src/stream/ngx_stream_script.h:73">ngx_stream_script_code_pt</a>&nbsp; &nbsp; &nbsp; code;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a>&nbsp; &nbsp;&nbsp; e;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L74" title="src/stream/ngx_stream_script.h:74">ngx_stream_script_len_code_pt</a>&nbsp; lcode;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (val-&gt;lengths == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *value = val-&gt;value;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L37" title="src/stream/ngx_stream_script.c:37">ngx_stream_script_flush_complex_value</a>(s, val);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L86" title="src/core/ngx_string.h:86">ngx_memzero</a>(&amp;e, <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e.ip = val-&gt;lengths;<br/></li>
<li>&nbsp; &nbsp; e.session = s;<br/></li>
<li>&nbsp; &nbsp; e.flushed = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; len = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (*(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> *) e.ip) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; lcode = *(<a href="ngx_stream_script.h.html#L74" title="src/stream/ngx_stream_script.h:74">ngx_stream_script_len_code_pt</a> *) e.ip;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; len += lcode(&amp;e);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; value-&gt;len = len;<br/></li>
<li>&nbsp; &nbsp; value-&gt;data = <a href="../core/ngx_palloc.c.html#L139" title="src/core/ngx_palloc.c:139">ngx_pnalloc</a>(s-&gt;connection-&gt;pool, len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (value-&gt;data == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e.ip = val-&gt;values;<br/></li>
<li>&nbsp; &nbsp; e.pos = value-&gt;data;<br/></li>
<li>&nbsp; &nbsp; e.buf = *value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (*(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span> *) e.ip) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; code = *(<a href="ngx_stream_script.h.html#L73" title="src/stream/ngx_stream_script.h:73">ngx_stream_script_code_pt</a> *) e.ip;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; code((<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *) &amp;e);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; *value = e.buf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L109">&#x200c;</a><span class="linkable">ngx_stream_compile_complex_value</span>(<a href="ngx_stream_script.h.html#L70" title="src/stream/ngx_stream_script.h:70">ngx_stream_compile_complex_value_t</a> *ccv)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *v;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i, n, nv, nc;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_array.h.html#L22" title="src/core/ngx_array.h:22">ngx_array_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; flushes, lengths, values, *pf, *pl, *pv;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a>&nbsp;&nbsp; sc;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = ccv-&gt;value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; nv = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; nc = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; v-&gt;len; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data[i] == <span class="Constant">'$'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v-&gt;data[i + <span class="Constant">1</span>] &gt;= <span class="Constant">'1'</span> &amp;&amp; v-&gt;data[i + <span class="Constant">1</span>] &lt;= <span class="Constant">'9'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nc++;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nv++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> ((v-&gt;len == <span class="Constant">0</span> || v-&gt;data[<span class="Constant">0</span>] != <span class="Constant">'$'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (ccv-&gt;conf_prefix || ccv-&gt;root_prefix))<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_conf_file.c.html#L845" title="src/core/ngx_conf_file.c:845">ngx_conf_full_name</a>(ccv-&gt;cf-&gt;cycle, v, ccv-&gt;conf_prefix) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ccv-&gt;conf_prefix = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ccv-&gt;root_prefix = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; ccv-&gt;complex_value-&gt;value = *v;<br/></li>
<li>&nbsp; &nbsp; ccv-&gt;complex_value-&gt;flushes = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; ccv-&gt;complex_value-&gt;lengths = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; ccv-&gt;complex_value-&gt;values = <span class="Constant">NULL</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (nv == <span class="Constant">0</span> &amp;&amp; nc == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = nv + <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_array.h.html#L32" title="src/core/ngx_array.h:32">ngx_array_init</a>(&amp;flushes, ccv-&gt;cf-&gt;pool, n, <span class="Statement">sizeof</span>(<a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = nv * (<span class="Constant">2</span> * <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_array.h.html#L32" title="src/core/ngx_array.h:32">ngx_array_init</a>(&amp;lengths, ccv-&gt;cf-&gt;pool, n, <span class="Constant">1</span>) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = (nv * (<span class="Constant">2</span> * <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; + <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + v-&gt;len<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp; ~(<span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_array.h.html#L32" title="src/core/ngx_array.h:32">ngx_array_init</a>(&amp;values, ccv-&gt;cf-&gt;pool, n, <span class="Constant">1</span>) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; pf = &amp;flushes;<br/></li>
<li>&nbsp; &nbsp; pl = &amp;lengths;<br/></li>
<li>&nbsp; &nbsp; pv = &amp;values;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L86" title="src/core/ngx_string.h:86">ngx_memzero</a>(&amp;sc, <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; sc.cf = ccv-&gt;cf;<br/></li>
<li>&nbsp; &nbsp; sc.source = v;<br/></li>
<li>&nbsp; &nbsp; sc.flushes = &amp;pf;<br/></li>
<li>&nbsp; &nbsp; sc.lengths = &amp;pl;<br/></li>
<li>&nbsp; &nbsp; sc.values = &amp;pv;<br/></li>
<li>&nbsp; &nbsp; sc.complete_lengths = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; sc.complete_values = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; sc.zero = ccv-&gt;zero;<br/></li>
<li>&nbsp; &nbsp; sc.conf_prefix = ccv-&gt;conf_prefix;<br/></li>
<li>&nbsp; &nbsp; sc.root_prefix = ccv-&gt;root_prefix;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L265" title="src/stream/ngx_stream_script.c:265">ngx_stream_script_compile</a>(&amp;sc) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (flushes.nelts) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ccv-&gt;complex_value-&gt;flushes = flushes.elts;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ccv-&gt;complex_value-&gt;flushes[flushes.nelts] = (<a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>) -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; ccv-&gt;complex_value-&gt;lengths = lengths.elts;<br/></li>
<li>&nbsp; &nbsp; ccv-&gt;complex_value-&gt;values = values.elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">char</span> *<br/></li>
<li><a id="L213">&#x200c;</a><span class="linkable">ngx_stream_set_complex_value_slot</span>(<a href="../core/ngx_core.h.html#L16" title="src/core/ngx_core.h:16">ngx_conf_t</a> *cf, <a href="../core/ngx_core.h.html#L22" title="src/core/ngx_core.h:22">ngx_command_t</a> *cmd,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> *conf)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>&nbsp; *p = conf;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *value;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L59" title="src/stream/ngx_stream_script.h:59">ngx_stream_complex_value_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; **cv;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L70" title="src/stream/ngx_stream_script.h:70">ngx_stream_compile_complex_value_t</a>&nbsp; &nbsp; ccv;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cv = (<a href="ngx_stream_script.h.html#L59" title="src/stream/ngx_stream_script.h:59">ngx_stream_complex_value_t</a> **) (p + cmd-&gt;offset);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (*cv != <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">&quot;duplicate&quot;</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; *cv = <a href="../core/ngx_palloc.c.html#L126" title="src/core/ngx_palloc.c:126">ngx_palloc</a>(cf-&gt;pool, <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L59" title="src/stream/ngx_stream_script.h:59">ngx_stream_complex_value_t</a>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (*cv == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_conf_file.h.html#L64" title="src/core/ngx_conf_file.h:64">NGX_CONF_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; value = cf-&gt;args-&gt;elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L86" title="src/core/ngx_string.h:86">ngx_memzero</a>(&amp;ccv, <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L70" title="src/stream/ngx_stream_script.h:70">ngx_stream_compile_complex_value_t</a>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; ccv.cf = cf;<br/></li>
<li>&nbsp; &nbsp; ccv.value = &amp;value[<span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; ccv.complex_value = *cv;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L109" title="src/stream/ngx_stream_script.c:109">ngx_stream_compile_complex_value</a>(&amp;ccv) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_conf_file.h.html#L64" title="src/core/ngx_conf_file.h:64">NGX_CONF_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_conf_file.h.html#L63" title="src/core/ngx_conf_file.h:63">NGX_CONF_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a><br/></li>
<li><a id="L250">&#x200c;</a><span class="linkable">ngx_stream_script_variables_count</span>(<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *value)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; i, n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (n = <span class="Constant">0</span>, i = <span class="Constant">0</span>; i &lt; value-&gt;len; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (value-&gt;data[i] == <span class="Constant">'$'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> n;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L265">&#x200c;</a><span class="linkable">ngx_stream_script_compile</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp;&nbsp; ch;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; name;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp;&nbsp; i, bracket;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L390" title="src/stream/ngx_stream_script.c:390">ngx_stream_script_init_arrays</a>(sc) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; sc-&gt;source-&gt;len; <span class="Comment">/* void */</span> ) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; name.len = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;source-&gt;data[i] == <span class="Constant">'$'</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (++i == sc-&gt;source-&gt;len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> invalid_variable;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_PCRE)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;source-&gt;data[i] &gt;= <span class="Constant">'1'</span> &amp;&amp; sc-&gt;source-&gt;data[i] &lt;= <span class="Constant">'9'</span>) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n = sc-&gt;source-&gt;data[i] - <span class="Constant">'0'</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L689" title="src/stream/ngx_stream_script.c:689">ngx_stream_script_add_capture_code</a>(sc, n) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i++;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;source-&gt;data[i] == <span class="Constant">'{'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bracket = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (++i == sc-&gt;source-&gt;len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> invalid_variable;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name.data = &amp;sc-&gt;source-&gt;data[i];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bracket = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name.data = &amp;sc-&gt;source-&gt;data[i];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> ( <span class="Comment">/* void */</span> ; i &lt; sc-&gt;source-&gt;len; i++, name.len++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch = sc-&gt;source-&gt;data[i];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (ch == <span class="Constant">'}'</span> &amp;&amp; bracket) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bracket = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> ((ch &gt;= <span class="Constant">'A'</span> &amp;&amp; ch &lt;= <span class="Constant">'Z'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || (ch &gt;= <span class="Constant">'a'</span> &amp;&amp; ch &lt;= <span class="Constant">'z'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || (ch &gt;= <span class="Constant">'0'</span> &amp;&amp; ch &lt;= <span class="Constant">'9'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || ch == <span class="Constant">'_'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bracket) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, sc-&gt;cf, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;the closing bracket in </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant"> &quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;variable is missing&quot;</span>, &amp;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (name.len == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> invalid_variable;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sc-&gt;variables++;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L584" title="src/stream/ngx_stream_script.c:584">ngx_stream_script_add_var_code</a>(sc, &amp;name) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; name.data = &amp;sc-&gt;source-&gt;data[i];<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (i &lt; sc-&gt;source-&gt;len) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;source-&gt;data[i] == <span class="Constant">'$'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name.len++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; sc-&gt;size += name.len;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L504" title="src/stream/ngx_stream_script.c:504">ngx_stream_script_add_copy_code</a>(sc, &amp;name, (i == sc-&gt;source-&gt;len))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L434" title="src/stream/ngx_stream_script.c:434">ngx_stream_script_done</a>(sc);<br/></li>
<li><br/></li>
<li><span class="Statement">invalid_variable</span><span class="cUserCont">:<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_conf_file.c.html#L950" title="src/core/ngx_conf_file.c:950">ngx_conf_log_error</a>(<a href="../core/ngx_log.h.html#L17" title="src/core/ngx_log.h:17">NGX_LOG_EMERG</a>, sc-&gt;cf, <span class="Constant">0</span>, <span class="Constant">&quot;invalid variable name&quot;</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L390">&#x200c;</a><span class="linkable">ngx_stream_script_init_arrays</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp;&nbsp; n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;flushes &amp;&amp; *sc-&gt;flushes == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; n = sc-&gt;variables ? sc-&gt;variables : <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *sc-&gt;flushes = <a href="../core/ngx_array.c.html#L13" title="src/core/ngx_array.c:13">ngx_array_create</a>(sc-&gt;cf-&gt;pool, n, <span class="Statement">sizeof</span>(<a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*sc-&gt;flushes == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (*sc-&gt;lengths == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; n = sc-&gt;variables * (<span class="Constant">2</span> * <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; + <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *sc-&gt;lengths = <a href="../core/ngx_array.c.html#L13" title="src/core/ngx_array.c:13">ngx_array_create</a>(sc-&gt;cf-&gt;pool, n, <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*sc-&gt;lengths == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (*sc-&gt;values == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; n = (sc-&gt;variables * (<span class="Constant">2</span> * <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + sc-&gt;source-&gt;len<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp; ~(<span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *sc-&gt;values = <a href="../core/ngx_array.c.html#L13" title="src/core/ngx_array.c:13">ngx_array_create</a>(sc-&gt;cf-&gt;pool, n, <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*sc-&gt;values == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; sc-&gt;variables = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L434">&#x200c;</a><span class="linkable">ngx_stream_script_done</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; &nbsp; zero;<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>&nbsp;&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;zero) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; zero.len = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; zero.data = (u_char *) <span class="Constant">&quot;</span><span class="Special">\0</span><span class="Constant">&quot;</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L504" title="src/stream/ngx_stream_script.c:504">ngx_stream_script_add_copy_code</a>(sc, &amp;zero, <span class="Constant">0</span>) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;conf_prefix || sc-&gt;root_prefix) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L782" title="src/stream/ngx_stream_script.c:782">ngx_stream_script_add_full_name_code</a>(sc) != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;complete_lengths) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;lengths, <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *code = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;complete_values) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;values, <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;sc-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *code = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">void</span> *<br/></li>
<li><a id="L480">&#x200c;</a><span class="linkable">ngx_stream_script_add_code</span>(<a href="../core/ngx_array.h.html#L22" title="src/core/ngx_array.h:22">ngx_array_t</a> *codes, <span class="Type">size_t</span> size, <span class="Type">void</span> *code)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; *elts, **p;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span>&nbsp; &nbsp; *new;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; elts = codes-&gt;elts;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; new = <a href="../core/ngx_array.c.html#L95" title="src/core/ngx_array.c:95">ngx_array_push_n</a>(codes, size);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (new == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (elts != codes-&gt;elts) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p = code;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *p += (u_char *) codes-&gt;elts - elts;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> new;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L504">&#x200c;</a><span class="linkable">ngx_stream_script_add_copy_code</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc,<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *value, <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> last)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size, len, zero;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; zero = (sc-&gt;zero &amp;&amp; last);<br/></li>
<li>&nbsp; &nbsp; len = value-&gt;len + zero;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;lengths,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = (<a href="ngx_stream_script.h.html#L73" title="src/stream/ngx_stream_script.h:73">ngx_stream_script_code_pt</a>) <a href="#L548" title="src/stream/ngx_stream_script.c:548">ngx_stream_script_copy_len_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;len = len;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; size = (<span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>) + len + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp; ~(<span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;values, size, &amp;sc-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = <a href="#L561" title="src/stream/ngx_stream_script.c:561">ngx_stream_script_copy_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;len = len;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = <a href="../core/ngx_string.h.html#L93" title="src/core/ngx_string.h:93">ngx_cpymem</a>((u_char *) code + <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; value-&gt;data, value-&gt;len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (zero) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *p = <span class="Special">'\0'</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; sc-&gt;zero = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">size_t<br/></li>
<li><a id="L548">&#x200c;</a></span><span class="linkable">ngx_stream_script_copy_len_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> code-&gt;len;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">void<br/></li>
<li><a id="L561">&#x200c;</a></span><span class="linkable">ngx_stream_script_copy_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; p = e-&gt;pos;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!e-&gt;skip) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; e-&gt;pos = <a href="../core/ngx_string.h.html#L116" title="src/core/ngx_string.h:116">ngx_copy</a>(p, e-&gt;ip + <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; code-&gt;len);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L80" title="src/stream/ngx_stream_script.h:80">ngx_stream_script_copy_code_t</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + ((code-&gt;len + <span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>) &amp; ~(<span class="Statement">sizeof</span>(<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) - <span class="Constant">1</span>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_log.h.html#L142" title="src/core/ngx_log.h:142">ngx_log_debug2</a>(<a href="../core/ngx_log.h.html#L32" title="src/core/ngx_log.h:32">NGX_LOG_DEBUG_STREAM</a>, e-&gt;session-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;stream script copy: </span><span class="Special">\&quot;%*s\&quot;</span><span class="Constant">&quot;</span>, e-&gt;pos - p, p);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L584">&#x200c;</a><span class="linkable">ngx_stream_script_add_var_code</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc, <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *name)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index, *p;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; index = <a href="ngx_stream_variables.c.html#L166" title="src/stream/ngx_stream_variables.c:166">ngx_stream_get_variable_index</a>(sc-&gt;cf, name);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (index == <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;flushes) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="../core/ngx_array.c.html#L48" title="src/core/ngx_array.c:48">ngx_array_push</a>(*sc-&gt;flushes);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *p = index;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;lengths,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = (<a href="ngx_stream_script.h.html#L73" title="src/stream/ngx_stream_script.h:73">ngx_stream_script_code_pt</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L630" title="src/stream/ngx_stream_script.c:630">ngx_stream_script_copy_var_len_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;index = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) index;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;values,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;sc-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = <a href="#L655" title="src/stream/ngx_stream_script.c:655">ngx_stream_script_copy_var_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;index = (<span class="Type"><a href="../os/win32/ngx_win32_config.h.html#L156" title="src/os/win32/ngx_win32_config.h:156">uintptr_t</a></span>) index;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">size_t<br/></li>
<li><a id="L630">&#x200c;</a></span><span class="linkable">ngx_stream_script_copy_var_len_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_variables.h.html#L17" title="src/stream/ngx_stream_variables.h:17">ngx_stream_variable_value_t</a>&nbsp;&nbsp; *value;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (e-&gt;flushed) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; value = <a href="ngx_stream_variables.c.html#L226" title="src/stream/ngx_stream_variables.c:226">ngx_stream_get_indexed_variable</a>(e-&gt;session, code-&gt;index);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; value = <a href="ngx_stream_variables.c.html#L263" title="src/stream/ngx_stream_variables.c:263">ngx_stream_get_flushed_variable</a>(e-&gt;session, code-&gt;index);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (value &amp;&amp; !value-&gt;not_found) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> value-&gt;len;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">void<br/></li>
<li><a id="L655">&#x200c;</a></span><span class="linkable">ngx_stream_script_copy_var_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *p;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_variables.h.html#L17" title="src/stream/ngx_stream_variables.h:17">ngx_stream_variable_value_t</a>&nbsp;&nbsp; *value;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L86" title="src/stream/ngx_stream_script.h:86">ngx_stream_script_var_code_t</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!e-&gt;skip) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (e-&gt;flushed) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value = <a href="ngx_stream_variables.c.html#L226" title="src/stream/ngx_stream_variables.c:226">ngx_stream_get_indexed_variable</a>(e-&gt;session, code-&gt;index);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value = <a href="ngx_stream_variables.c.html#L263" title="src/stream/ngx_stream_variables.c:263">ngx_stream_get_flushed_variable</a>(e-&gt;session, code-&gt;index);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (value &amp;&amp; !value-&gt;not_found) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p = e-&gt;pos;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e-&gt;pos = <a href="../core/ngx_string.h.html#L116" title="src/core/ngx_string.h:116">ngx_copy</a>(p, value-&gt;data, value-&gt;len);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../core/ngx_log.h.html#L142" title="src/core/ngx_log.h:142">ngx_log_debug2</a>(<a href="../core/ngx_log.h.html#L32" title="src/core/ngx_log.h:32">NGX_LOG_DEBUG_STREAM</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; e-&gt;session-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;stream script var: </span><span class="Special">\&quot;%*s\&quot;</span><span class="Constant">&quot;</span>, e-&gt;pos - p, p);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="PreProc">#if (NGX_PCRE)<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L689">&#x200c;</a><span class="linkable">ngx_stream_script_add_capture_code</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc,<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a> n)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;lengths,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = (<a href="ngx_stream_script.h.html#L73" title="src/stream/ngx_stream_script.h:73">ngx_stream_script_code_pt</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L725" title="src/stream/ngx_stream_script.c:725">ngx_stream_script_copy_capture_len_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;n = <span class="Constant">2</span> * n;<br/></li>
<li><br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;values,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;sc-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = <a href="#L750" title="src/stream/ngx_stream_script.c:750">ngx_stream_script_copy_capture_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;n = <span class="Constant">2</span> * n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (sc-&gt;ncaptures &lt; n) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; sc-&gt;ncaptures = n;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">size_t<br/></li>
<li><a id="L725">&#x200c;</a></span><span class="linkable">ngx_stream_script_copy_capture_len_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *cap;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream.h.html#L20" title="src/stream/ngx_stream.h:20">ngx_stream_session_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *s;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = e-&gt;session;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = code-&gt;n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (n &lt; s-&gt;ncaptures) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; cap = s-&gt;captures;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> cap[n + <span class="Constant">1</span>] - cap[n];<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">void<br/></li>
<li><a id="L750">&#x200c;</a></span><span class="linkable">ngx_stream_script_copy_capture_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *cap;<br/></li>
<li>&nbsp; &nbsp; u_char&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *p, *pos;<br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_config.h.html#L79" title="src/core/ngx_config.h:79">ngx_uint_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream.h.html#L20" title="src/stream/ngx_stream.h:20">ngx_stream_session_t</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *s;<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = e-&gt;session;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L92" title="src/stream/ngx_stream_script.h:92">ngx_stream_script_copy_capture_code_t</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = code-&gt;n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; pos = e-&gt;pos;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (n &lt; s-&gt;ncaptures) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; cap = s-&gt;captures;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = s-&gt;captures_data;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; e-&gt;pos = <a href="../core/ngx_string.h.html#L116" title="src/core/ngx_string.h:116">ngx_copy</a>(pos, &amp;p[cap[n]], cap[n + <span class="Constant">1</span>] - cap[n]);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_log.h.html#L142" title="src/core/ngx_log.h:142">ngx_log_debug2</a>(<a href="../core/ngx_log.h.html#L32" title="src/core/ngx_log.h:32">NGX_LOG_DEBUG_STREAM</a>, e-&gt;session-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;stream script capture: </span><span class="Special">\&quot;%*s\&quot;</span><span class="Constant">&quot;</span>, e-&gt;pos - pos, pos);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="../core/ngx_config.h.html#L78" title="src/core/ngx_config.h:78">ngx_int_t</a><br/></li>
<li><a id="L782">&#x200c;</a><span class="linkable">ngx_stream_script_add_full_name_code</span>(<a href="ngx_stream_script.h.html#L51" title="src/stream/ngx_stream_script.h:51">ngx_stream_script_compile_t</a> *sc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;lengths,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = (<a href="ngx_stream_script.h.html#L73" title="src/stream/ngx_stream_script.h:73">ngx_stream_script_code_pt</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L811" title="src/stream/ngx_stream_script.c:811">ngx_stream_script_full_name_len_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;conf_prefix = sc-&gt;conf_prefix;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = <a href="#L480" title="src/stream/ngx_stream_script.c:480">ngx_stream_script_add_code</a>(*sc-&gt;values,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>), &amp;sc-&gt;<a href="../core/nginx.c.html#L187" title="src/core/nginx.c:187">main</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (code == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L37" title="src/core/ngx_core.h:37">NGX_ERROR</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code-&gt;code = <a href="#L825" title="src/stream/ngx_stream_script.c:825">ngx_stream_script_full_name_code</a>;<br/></li>
<li>&nbsp; &nbsp; code-&gt;conf_prefix = sc-&gt;conf_prefix;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">size_t<br/></li>
<li><a id="L811">&#x200c;</a></span><span class="linkable">ngx_stream_script_full_name_len_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> code-&gt;conf_prefix ? <a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;conf_prefix.len:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;prefix.len;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L825">&#x200c;</a></span><span class="linkable">ngx_stream_script_full_name_code</span>(<a href="ngx_stream_script.h.html#L29" title="src/stream/ngx_stream_script.h:29">ngx_stream_script_engine_t</a> *e)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>&nbsp; *code;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a>&nbsp; value, *prefix;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; code = (<a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a> *) e-&gt;ip;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; value.data = e-&gt;buf.data;<br/></li>
<li>&nbsp; &nbsp; value.len = e-&gt;pos - e-&gt;buf.data;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; prefix = code-&gt;conf_prefix ? (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) &amp;<a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;conf_prefix:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<a href="../core/ngx_string.h.html#L19" title="src/core/ngx_string.h:19">ngx_str_t</a> *) &amp;<a href="../core/ngx_cycle.c.html#L20" title="src/core/ngx_cycle.c:20">ngx_cycle</a>-&gt;prefix;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="../core/ngx_file.c.html#L21" title="src/core/ngx_file.c:21">ngx_get_full_name</a>(e-&gt;session-&gt;connection-&gt;pool, prefix, &amp;value)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; != <a href="../core/ngx_core.h.html#L36" title="src/core/ngx_core.h:36">NGX_OK</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; e-&gt;ip = <a href="#L31" title="src/stream/ngx_stream_script.c:31">ngx_stream_script_exit</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;buf = value;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="../core/ngx_log.h.html#L139" title="src/core/ngx_log.h:139">ngx_log_debug1</a>(<a href="../core/ngx_log.h.html#L32" title="src/core/ngx_log.h:32">NGX_LOG_DEBUG_STREAM</a>, e-&gt;session-&gt;connection-&gt;log, <span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot;stream script fullname: </span><span class="Special">\&quot;</span><span class="Constant">%V</span><span class="Special">\&quot;</span><span class="Constant">&quot;</span>, &amp;value);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; e-&gt;ip += <span class="Statement">sizeof</span>(<a href="ngx_stream_script.h.html#L98" title="src/stream/ngx_stream_script.h:98">ngx_stream_script_full_name_code_t</a>);<br/></li>
<li>}<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
